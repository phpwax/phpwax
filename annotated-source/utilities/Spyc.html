<!DOCTYPE html>

<html>
<head>
  <title>Spyc.php</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="layout.css" />
  <style>
    /*--------------------- Layout and Typography ----------------------------*/
body { font-family: 'Palatino Linotype', 'Book Antiqua', Palatino, FreeSerif, serif; font-size: 15px; line-height: 22px; color: #252519; margin: 0; padding: 0;
}
a { color: #261a3b;
} a:visited { color: #261a3b; }
p { margin: 0 0 15px 0;
}
h1, h2, h3, h4, h5, h6 { margin: 40px 0 15px 0;
} h3, h4, h5, h6 { margin-top: 20px; }
#container { position: relative;
}
#background { position: fixed; top: 0; left: 575px; right: 0; bottom: 0; background: #f5f5ff; border-left: 1px solid #e5e5ee; z-index: -1;
}
#jump_to, #jump_page { background: white; -webkit-box-shadow: 0 0 25px #777; -moz-box-shadow: 0 0 25px #777; -webkit-border-bottom-left-radius: 5px; -moz-border-radius-bottomleft: 5px; font: 10px Arial; text-transform: uppercase; cursor: pointer; text-align: right;
}
#jump_to, #jump_wrapper { position: fixed; right: 0; top: 0; padding: 5px 10px;
} #jump_wrapper { padding: 0; display: none; } #jump_to:hover #jump_wrapper { display: block; } #jump_page { padding: 5px 0 3px; margin: 0 0 25px 25px; overflow:hidden; } #jump_page .source { display: block; padding: 5px 10px; text-decoration: none; border-top: 1px solid #eee; float:left; min-width:180px; text-align:left; text-transform:none; font-size:11px; } #jump_page .source:hover { background: #f5f5ff; } #jump_page .source:first-child { }
table td { border: 0; outline: 0;
} td.docs, th.docs { max-width: 450px; min-width: 450px; min-height: 5px; padding: 10px 25px 1px 50px; overflow-x: hidden; vertical-align: top; text-align: left; } .docs pre { margin: 15px 0 15px; padding-left: 15px; } .docs p tt, .docs p code { background: #f8f8ff; border: 1px solid #dedede; font-size: 12px; padding: 0 0.2em; } .pilwrap { position: relative; } .pilcrow { font: 12px Arial; text-decoration: none; color: #454545; position: absolute; top: 3px; left: -20px; padding: 1px 2px; opacity: 0; -webkit-transition: opacity 0.2s linear; } td.docs:hover .pilcrow { opacity: 1; } td.code, th.code { padding: 14px 15px 16px 25px; width: 100%; vertical-align: top; background: #f5f5ff; border-left: 1px solid #e5e5ee; } pre, tt, code { font-size: 12px; line-height: 18px; font-family: Monaco, Consolas, "Lucida Console", monospace; margin: 0; padding: 0; } /*---------------------- Syntax Highlighting -----------------------------*/
td.linenos { background-color: #f0f0f0; padding-right: 10px; }
span.lineno { background-color: #f0f0f0; padding: 0 5px 0 5px; }
body .hll { background-color: #ffffcc }
body .c { color: #408080; font-style: italic } /* Comment */
body .err { border: 1px solid #FF0000 } /* Error */
body .k { color: #954121 } /* Keyword */
body .o { color: #666666 } /* Operator */
body .cm { color: #408080; font-style: italic } /* Comment.Multiline */
body .cp { color: #BC7A00 } /* Comment.Preproc */
body .c1 { color: #408080; font-style: italic } /* Comment.Single */
body .cs { color: #408080; font-style: italic } /* Comment.Special */
body .gd { color: #A00000 } /* Generic.Deleted */
body .ge { font-style: italic } /* Generic.Emph */
body .gr { color: #FF0000 } /* Generic.Error */
body .gh { color: #000080; font-weight: bold } /* Generic.Heading */
body .gi { color: #00A000 } /* Generic.Inserted */
body .go { color: #808080 } /* Generic.Output */
body .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
body .gs { font-weight: bold } /* Generic.Strong */
body .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
body .gt { color: #0040D0 } /* Generic.Traceback */
body .kc { color: #954121 } /* Keyword.Constant */
body .kd { color: #954121; font-weight: bold } /* Keyword.Declaration */
body .kn { color: #954121; font-weight: bold } /* Keyword.Namespace */
body .kp { color: #954121 } /* Keyword.Pseudo */
body .kr { color: #954121; font-weight: bold } /* Keyword.Reserved */
body .kt { color: #B00040 } /* Keyword.Type */
body .m { color: #666666 } /* Literal.Number */
body .s { color: #219161 } /* Literal.String */
body .na { color: #7D9029 } /* Name.Attribute */
body .nb { color: #954121 } /* Name.Builtin */
body .nc { color: #0000FF; font-weight: bold } /* Name.Class */
body .no { color: #880000 } /* Name.Constant */
body .nd { color: #AA22FF } /* Name.Decorator */
body .ni { color: #999999; font-weight: bold } /* Name.Entity */
body .ne { color: #D2413A; font-weight: bold } /* Name.Exception */
body .nf { color: #0000FF } /* Name.Function */
body .nl { color: #A0A000 } /* Name.Label */
body .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
body .nt { color: #954121; font-weight: bold } /* Name.Tag */
body .nv { color: #19469D } /* Name.Variable */
body .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
body .w { color: #bbbbbb } /* Text.Whitespace */
body .mf { color: #666666 } /* Literal.Number.Float */
body .mh { color: #666666 } /* Literal.Number.Hex */
body .mi { color: #666666 } /* Literal.Number.Integer */
body .mo { color: #666666 } /* Literal.Number.Oct */
body .sb { color: #219161 } /* Literal.String.Backtick */
body .sc { color: #219161 } /* Literal.String.Char */
body .sd { color: #219161; font-style: italic } /* Literal.String.Doc */
body .s2 { color: #219161 } /* Literal.String.Double */
body .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
body .sh { color: #219161 } /* Literal.String.Heredoc */
body .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
body .sx { color: #954121 } /* Literal.String.Other */
body .sr { color: #BB6688 } /* Literal.String.Regex */
body .s1 { color: #219161 } /* Literal.String.Single */
body .ss { color: #19469D } /* Literal.String.Symbol */
body .bp { color: #954121 } /* Name.Builtin.Pseudo */
body .vc { color: #19469D } /* Name.Variable.Class */
body .vg { color: #19469D } /* Name.Variable.Global */
body .vi { color: #19469D } /* Name.Variable.Instance */
body .il { color: #666666 } /* Literal.Number.Integer.Long */ /********** PHP Comment Additions ********/
td.docs .docparam {color:#DB251A;font-weight:bold;}
  </style>
</head>
<body>
  <div id="container">
    <div id="background"></div>
          <div id="jump_to">
        Jump To &hellip;
        <div id="jump_wrapper">
          <div id="jump_page">
                                        <a class="source" href="../auth/WaxAuthDb.html">
                              WaxAuthDb.php              </a>
                                        <a class="source" href="../AutoLoader.html">
                              AutoLoader.php              </a>
                                        <a class="source" href="../cache/engines/WaxCacheBackgroundFile.html">
                              WaxCacheBackgroundFile.php              </a>
                                        <a class="source" href="../cache/engines/WaxCacheBackgroundMemcache.html">
                              WaxCacheBackgroundMemcache.php              </a>
                                        <a class="source" href="../cache/engines/WaxCacheFile.html">
                              WaxCacheFile.php              </a>
                                        <a class="source" href="../cache/engines/WaxCacheFilesystem.html">
                              WaxCacheFilesystem.php              </a>
                                        <a class="source" href="../cache/engines/WaxCacheImage.html">
                              WaxCacheImage.php              </a>
                                        <a class="source" href="../cache/engines/WaxCacheMemcache.html">
                              WaxCacheMemcache.php              </a>
                                        <a class="source" href="../cache/engines/WaxCacheMemory.html">
                              WaxCacheMemory.php              </a>
                                        <a class="source" href="../cache/engines/WaxRegenFileCache.html">
                              WaxRegenFileCache.php              </a>
                                        <a class="source" href="../cache/engines/WaxRegenMemcacheCache.html">
                              WaxRegenMemcacheCache.php              </a>
                                        <a class="source" href="../cache/WaxCache.html">
                              WaxCache.php              </a>
                                        <a class="source" href="../cache/WaxCacheHelper.html">
                              WaxCacheHelper.php              </a>
                                        <a class="source" href="../cache/WaxCacheLoader.html">
                              WaxCacheLoader.php              </a>
                                        <a class="source" href="../config/Config.html">
                              Config.php              </a>
                                        <a class="source" href="../core/WaxApplication.html">
                              WaxApplication.php              </a>
                                        <a class="source" href="../core/WaxEvent.html">
                              WaxEvent.php              </a>
                                        <a class="source" href="../db/adapters/WaxMysqlAdapter.html">
                              WaxMysqlAdapter.php              </a>
                                        <a class="source" href="../db/adapters/WaxSqliteAdapter.html">
                              WaxSqliteAdapter.php              </a>
                                        <a class="source" href="../db/fields/AutoField.html">
                              AutoField.php              </a>
                                        <a class="source" href="../db/fields/BooleanField.html">
                              BooleanField.php              </a>
                                        <a class="source" href="../db/fields/CharField.html">
                              CharField.php              </a>
                                        <a class="source" href="../db/fields/DateTimeField.html">
                              DateTimeField.php              </a>
                                        <a class="source" href="../db/fields/EmailField.html">
                              EmailField.php              </a>
                                        <a class="source" href="../db/fields/FileField.html">
                              FileField.php              </a>
                                        <a class="source" href="../db/fields/FloatField.html">
                              FloatField.php              </a>
                                        <a class="source" href="../db/fields/ForeignKey.html">
                              ForeignKey.php              </a>
                                        <a class="source" href="../db/fields/HasManyField.html">
                              HasManyField.php              </a>
                                        <a class="source" href="../db/fields/IntegerField.html">
                              IntegerField.php              </a>
                                        <a class="source" href="../db/fields/ManyToManyField.html">
                              ManyToManyField.php              </a>
                                        <a class="source" href="../db/fields/PasswordField.html">
                              PasswordField.php              </a>
                                        <a class="source" href="../db/fields/TextField.html">
                              TextField.php              </a>
                                        <a class="source" href="../db/WaxDbAdapter.html">
                              WaxDbAdapter.php              </a>
                                        <a class="source" href="../db/WaxModel.html">
                              WaxModel.php              </a>
                                        <a class="source" href="../db/WaxModelAssociation.html">
                              WaxModelAssociation.php              </a>
                                        <a class="source" href="../db/WaxModelField.html">
                              WaxModelField.php              </a>
                                        <a class="source" href="../db/WaxModelJoin.html">
                              WaxModelJoin.php              </a>
                                        <a class="source" href="../db/WaxModelOrderedJoin.html">
                              WaxModelOrderedJoin.php              </a>
                                        <a class="source" href="../db/WaxPaginatedRecordset.html">
                              WaxPaginatedRecordset.php              </a>
                                        <a class="source" href="../db/WaxRecordset.html">
                              WaxRecordset.php              </a>
                                        <a class="source" href="../db/WaxTreeModel.html">
                              WaxTreeModel.php              </a>
                                        <a class="source" href="../db/WaxTreeRecordset.html">
                              WaxTreeRecordset.php              </a>
                                        <a class="source" href="../dispatch/WaxController.html">
                              WaxController.php              </a>
                                        <a class="source" href="../dispatch/WaxResponse.html">
                              WaxResponse.php              </a>
                                        <a class="source" href="../dispatch/WaxUrl.html">
                              WaxUrl.php              </a>
                                        <a class="source" href="../exceptions/MaintenanceException.html">
                              MaintenanceException.php              </a>
                                        <a class="source" href="../exceptions/WaxDbException.html">
                              WaxDbException.php              </a>
                                        <a class="source" href="../exceptions/WaxDBStructureException.html">
                              WaxDBStructureException.php              </a>
                                        <a class="source" href="../exceptions/WaxDependencyException.html">
                              WaxDependencyException.php              </a>
                                        <a class="source" href="../exceptions/WaxEmailException.html">
                              WaxEmailException.php              </a>
                                        <a class="source" href="../exceptions/WaxException.html">
                              WaxException.php              </a>
                                        <a class="source" href="../exceptions/WaxPermissionsException.html">
                              WaxPermissionsException.php              </a>
                                        <a class="source" href="../exceptions/WaxSqlException.html">
                              WaxSqlException.php              </a>
                                        <a class="source" href="../exceptions/WaxUserException.html">
                              WaxUserException.php              </a>
                                        <a class="source" href="../exceptions/WXException.html">
                              WXException.php              </a>
                                        <a class="source" href="../exceptions/WXRoutingException.html">
                              WXRoutingException.php              </a>
                                        <a class="source" href="../forms/WaxBoundForm.html">
                              WaxBoundForm.php              </a>
                                        <a class="source" href="../forms/WaxForm.html">
                              WaxForm.php              </a>
                                        <a class="source" href="../forms/WaxRecordsetForm.html">
                              WaxRecordsetForm.php              </a>
                                        <a class="source" href="../forms/WaxUnboundForm.html">
                              WaxUnboundForm.php              </a>
                                        <a class="source" href="../forms/WaxValidate.html">
                              WaxValidate.php              </a>
                                        <a class="source" href="../forms/WaxWidget.html">
                              WaxWidget.php              </a>
                                        <a class="source" href="../forms/widgets/CheckboxInput.html">
                              CheckboxInput.php              </a>
                                        <a class="source" href="../forms/widgets/CountrySelectInput.html">
                              CountrySelectInput.php              </a>
                                        <a class="source" href="../forms/widgets/DateInput.html">
                              DateInput.php              </a>
                                        <a class="source" href="../forms/widgets/DateSelectInput.html">
                              DateSelectInput.php              </a>
                                        <a class="source" href="../forms/widgets/FileInput.html">
                              FileInput.php              </a>
                                        <a class="source" href="../forms/widgets/HiddenInput.html">
                              HiddenInput.php              </a>
                                        <a class="source" href="../forms/widgets/ImageSubmitInput.html">
                              ImageSubmitInput.php              </a>
                                        <a class="source" href="../forms/widgets/MultipleSelectInput.html">
                              MultipleSelectInput.php              </a>
                                        <a class="source" href="../forms/widgets/PasswordInput.html">
                              PasswordInput.php              </a>
                                        <a class="source" href="../forms/widgets/RadioInput.html">
                              RadioInput.php              </a>
                                        <a class="source" href="../forms/widgets/SelectInput.html">
                              SelectInput.php              </a>
                                        <a class="source" href="../forms/widgets/SubmitInput.html">
                              SubmitInput.php              </a>
                                        <a class="source" href="../forms/widgets/TextareaInput.html">
                              TextareaInput.php              </a>
                                        <a class="source" href="../forms/widgets/TextInput.html">
                              TextInput.php              </a>
                                        <a class="source" href="../helpers/AssetTagHelper.html">
                              AssetTagHelper.php              </a>
                                        <a class="source" href="../helpers/deprecated/FormBuilderHelper.html">
                              FormBuilderHelper.php              </a>
                                        <a class="source" href="../helpers/deprecated/FormHelper.html">
                              FormHelper.php              </a>
                                        <a class="source" href="../helpers/deprecated/FormOptionsHelper.html">
                              FormOptionsHelper.php              </a>
                                        <a class="source" href="../helpers/deprecated/FormTagHelper.html">
                              FormTagHelper.php              </a>
                                        <a class="source" href="../helpers/RequestHelper.html">
                              RequestHelper.php              </a>
                                        <a class="source" href="../helpers/UrlHelper.html">
                              UrlHelper.php              </a>
                                        <a class="source" href="../helpers/WXHelpers.html">
                              WXHelpers.php              </a>
                                        <a class="source" href="../interfaces/Cacheable.html">
                              Cacheable.php              </a>
                                        <a class="source" href="../interfaces/CacheEngine.html">
                              CacheEngine.php              </a>
                                        <a class="source" href="../template/WaxPartial.html">
                              WaxPartial.php              </a>
                                        <a class="source" href="../template/WaxPartialHelper.html">
                              WaxPartialHelper.php              </a>
                                        <a class="source" href="../template/WaxTemplate.html">
                              WaxTemplate.php              </a>
                                        <a class="source" href="../testing/WXTestCase.html">
                              WXTestCase.php              </a>
                                        <a class="source" href="../testing/WXWebTestCase.html">
                              WXWebTestCase.php              </a>
                                        <a class="source" href="../tests/TestConfig.html">
                              TestConfig.php              </a>
                                        <a class="source" href="../tests/TestInflections.html">
                              TestInflections.php              </a>
                                        <a class="source" href="../tests/TestPaginatedRecordset.html">
                              TestPaginatedRecordset.php              </a>
                                        <a class="source" href="../tests/TestRequest.html">
                              TestRequest.php              </a>
                                        <a class="source" href="../tests/TestWaxAuthDb.html">
                              TestWaxAuthDb.php              </a>
                                        <a class="source" href="../tests/TestWaxController.html">
                              TestWaxController.php              </a>
                                        <a class="source" href="../tests/TestWaxModel.html">
                              TestWaxModel.php              </a>
                                        <a class="source" href="../tests/TestWaxModelField.html">
                              TestWaxModelField.php              </a>
                                        <a class="source" href="../tests/TestWaxTreeModel.html">
                              TestWaxTreeModel.php              </a>
                                        <a class="source" href="../tests/TestWaxUrl.html">
                              TestWaxUrl.php              </a>
                                        <a class="source" href="../tests/TestWXEmail.html">
                              TestWXEmail.php              </a>
                                        <a class="source" href="../utilities/deprecated/WXEmail.html">
                              WXEmail.php              </a>
                                        <a class="source" href="../utilities/deprecated/WXScripts.html">
                              WXScripts.php              </a>
                                        <a class="source" href="../utilities/File.html">
                              File.php              </a>
                                        <a class="source" href="../utilities/Image.html">
                              Image.php              </a>
                                        <a class="source" href="../utilities/ImageGD.html">
                              ImageGD.php              </a>
                                        <a class="source" href="../utilities/Inflections.html">
                              Inflections.php              </a>
                                        <a class="source" href="../utilities/Profiler.html">
                              Profiler.php              </a>
                                        <a class="source" href="../utilities/Request.html">
                              Request.php              </a>
                                        <a class="source" href="../utilities/Session.html">
                              Session.php              </a>
                                        <a class="source" href="../utilities/Spyc.html">
                              Spyc.php              </a>
                                        <a class="source" href="../utilities/WaxCLI.html">
                              WaxCLI.php              </a>
                                        <a class="source" href="../utilities/WaxCodeGenerator.html">
                              WaxCodeGenerator.php              </a>
                                        <a class="source" href="../utilities/WaxEmail.html">
                              WaxEmail.php              </a>
                                        <a class="source" href="../utilities/WaxLog.html">
                              WaxLog.php              </a>
                      </div>
        </div>
      </div>
        <table cellpadding="0" cellspacing="0">
      <thead>
        <tr>
          <th class="docs">
            <h1>
              Spyc.php            </h1>
          </th>
          <th class="code">
          </th>
        </tr>
      </thead>
      <tbody>
                  <tr id="section-0">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-0">&#182;</a>
              </div>
              <p>Spyc -- A Simple PHP YAML Class
<em class='docparam'>@version</em> 0.2.3 -- 2006-02-04
<em class='docparam'>@author</em> Chris Wanstrath <a href="&#109;a&#x69;l&#x74;&#111;&#x3a;&#99;&#x68;&#114;&#x69;&#115;&#x40;&#111;&#x7a;&#109;&#x6d;&#46;&#x6f;&#114;&#x67;">&#99;&#x68;&#114;&#x69;&#115;&#x40;&#111;&#x7a;&#109;&#x6d;&#46;&#x6f;&#114;&#x67;</a>
<em class='docparam'>@link</em> http:spyc.sourceforge.net/
<em class='docparam'>@copyright</em> Copyright 2005-2006 Chris Wanstrath
<em class='docparam'>@license</em> http:www.opensource.org/licenses/mit-license.php MIT License
<em class='docparam'>@package</em> Spyc</p>
            </td>
            <td class="code">
              <div class="highlight"><pre></pre></div>            </td>
          </tr>
                  <tr id="section-1">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              <p>A node, used by Spyc for parsing YAML.
<em class='docparam'>@package</em> Spyc</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>  <span class="k">class</span> <span class="nc">YAMLNode</span> <span class="p">{</span></pre></div>            </td>
          </tr>
                  <tr id="section-2">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p><em class='docparam'>@access</em> public
<em class='docparam'>@var</em> string</p>
            </td>
            <td class="code">
              <div class="highlight"><pre> 
    <span class="k">public</span> <span class="nv">$parent</span><span class="p">;</span>
    <span class="k">public</span> <span class="nv">$id</span><span class="p">;</span></pre></div>            </td>
          </tr>
                  <tr id="section-3">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p><em class='docparam'>@access</em> public
<em class='docparam'>@var</em> mixed</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>    <span class="k">public</span> <span class="nv">$data</span><span class="p">;</span></pre></div>            </td>
          </tr>
                  <tr id="section-4">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p><em class='docparam'>@access</em> public
<em class='docparam'>@var</em> int</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>    <span class="k">public</span> <span class="nv">$indent</span><span class="p">;</span></pre></div>            </td>
          </tr>
                  <tr id="section-5">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p><em class='docparam'>@access</em> public
<em class='docparam'>@var</em> bool</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>    <span class="k">public</span> <span class="nv">$children</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span></pre></div>            </td>
          </tr>
                  <tr id="section-6">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>The constructor assigns the node a unique ID.
<em class='docparam'>@access</em> public
<em class='docparam'>@return</em> void</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>     <span class="k">public</span> <span class="k">function</span> <span class="nf">YAMLNode</span><span class="p">()</span> <span class="p">{</span>
      <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">id</span> <span class="o">=</span> <span class="nb">uniqid</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span></pre></div>            </td>
          </tr>
                  <tr id="section-7">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>The Simple PHP YAML Class.</p>

<p>This class can be used to read a YAML file and convert its contents
 into a PHP array.  It currently supports a very limited subsection of
 the YAML spec.</p>

<p>Usage:
 <code>
   $parser = new Spyc;
   $array  = $parser->load($file);
 </code>
<em class='docparam'>@package</em> Spyc</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>  <span class="k">class</span> <span class="nc">Spyc</span> <span class="p">{</span></pre></div>            </td>
          </tr>
                  <tr id="section-8">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>Load YAML into a PHP array statically</p>

<p>The load method, when supplied with a YAML stream (string or file), 
 will do its best to convert YAML in a file into a PHP array.  Pretty 
 simple.
  Usage: 
  <code>
   $array = Spyc::YAMLLoad('lucky.yml');
   print_r($array);
  </code>
<em class='docparam'>@access</em> public
<em class='docparam'>@return</em> array
<em class='docparam'>@param</em> string $input Path of YAML file or string containing YAML</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>     <span class="k">public</span> <span class="k">function</span> <span class="nf">YAMLLoad</span><span class="p">(</span><span class="nv">$input</span><span class="p">)</span> <span class="p">{</span>
      <span class="nv">$spyc</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Spyc</span><span class="p">;</span>
      <span class="k">return</span> <span class="nv">$spyc</span><span class="o">-&gt;</span><span class="na">load</span><span class="p">(</span><span class="nv">$input</span><span class="p">);</span>
    <span class="p">}</span></pre></div>            </td>
          </tr>
                  <tr id="section-9">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>Dump YAML from PHP array statically</p>

<p>The dump method, when supplied with an array, will do its best
 to convert the array into friendly YAML.  Pretty simple.  Feel free to
 save the returned string as nothing.yml and pass it around.</p>

<p>Oh, and you can decide how big the indent is and what the wordwrap
 for folding is.  Pretty cool -- just pass in 'false' for either if 
 you want to use the default.</p>

<p>Indent's default is 2 spaces, wordwrap's default is 40 characters.  And
 you can turn off wordwrap by passing in 0.</p>

<p><em class='docparam'>@access</em> public
<em class='docparam'>@return</em> string
<em class='docparam'>@param</em> array $array PHP array
<em class='docparam'>@param</em> int $indent Pass in false to use the default, which is 2 
<em class='docparam'>@param</em> int $wordwrap Pass in 0 for no wordwrap, false for default (40)</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>     <span class="k">public</span> <span class="k">function</span> <span class="nf">YAMLDump</span><span class="p">(</span><span class="nv">$array</span><span class="p">,</span><span class="nv">$indent</span> <span class="o">=</span> <span class="k">false</span><span class="p">,</span><span class="nv">$wordwrap</span> <span class="o">=</span> <span class="k">false</span><span class="p">)</span> <span class="p">{</span>
      <span class="nv">$spyc</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Spyc</span><span class="p">;</span>
      <span class="k">return</span> <span class="nv">$spyc</span><span class="o">-&gt;</span><span class="na">dump</span><span class="p">(</span><span class="nv">$array</span><span class="p">,</span><span class="nv">$indent</span><span class="p">,</span><span class="nv">$wordwrap</span><span class="p">);</span>
    <span class="p">}</span></pre></div>            </td>
          </tr>
                  <tr id="section-10">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>Load YAML into a PHP array from an instantiated object</p>

<p>The load method, when supplied with a YAML stream (string or file path), 
 will do its best to convert the YAML into a PHP array.  Pretty simple.
  Usage: 
  <code>
   $parser = new Spyc;
   $array  = $parser->load('lucky.yml');
   print_r($array);
  </code>
<em class='docparam'>@access</em> public
<em class='docparam'>@return</em> array
<em class='docparam'>@param</em> string $input Path of YAML file or string containing YAML</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>     <span class="k">public</span> <span class="k">function</span> <span class="nf">load</span><span class="p">(</span><span class="nv">$input</span><span class="p">)</span> <span class="p">{</span></pre></div>            </td>
          </tr>
                  <tr id="section-11">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p>See what type of input we're talking about</p>
            </td>
            <td class="code">
              <div class="highlight"><pre></pre></div>            </td>
          </tr>
                  <tr id="section-12">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p>If it's not a file, assume it's a string</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$input</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nb">strpos</span><span class="p">(</span><span class="nv">$input</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span> <span class="o">===</span> <span class="k">false</span><span class="p">)</span> 
          <span class="o">&amp;&amp;</span> <span class="nb">file_exists</span><span class="p">(</span><span class="nv">$input</span><span class="p">))</span> <span class="p">{</span>
        <span class="nv">$yaml</span> <span class="o">=</span> <span class="nb">file</span><span class="p">(</span><span class="nv">$input</span><span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$yaml</span> <span class="o">=</span> <span class="nb">explode</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span><span class="nv">$input</span><span class="p">);</span>
      <span class="p">}</span></pre></div>            </td>
          </tr>
                  <tr id="section-13">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p>Initiate some objects and values</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>      <span class="nv">$base</span>              <span class="o">=</span> <span class="k">new</span> <span class="nx">YAMLNode</span><span class="p">;</span>
      <span class="nv">$base</span><span class="o">-&gt;</span><span class="na">indent</span>      <span class="o">=</span> <span class="m">0</span><span class="p">;</span>
      <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_lastIndent</span> <span class="o">=</span> <span class="m">0</span><span class="p">;</span>
      <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_lastNode</span>   <span class="o">=</span> <span class="nv">$base</span><span class="o">-&gt;</span><span class="na">id</span><span class="p">;</span>
      <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_inBlock</span>    <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
      <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_isInline</span>   <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
  
      <span class="k">foreach</span> <span class="p">(</span><span class="nv">$yaml</span> <span class="k">as</span> <span class="nv">$linenum</span> <span class="o">=&gt;</span> <span class="nv">$line</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$ifchk</span> <span class="o">=</span> <span class="nb">trim</span><span class="p">(</span><span class="nv">$line</span><span class="p">);</span></pre></div>            </td>
          </tr>
                  <tr id="section-14">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p>If the line starts with a tab (instead of a space), throw a fit.</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>        <span class="k">if</span> <span class="p">(</span><span class="nb">preg_match</span><span class="p">(</span><span class="s1">&#39;/^(\t)+(\w+)/&#39;</span><span class="p">,</span> <span class="nv">$line</span><span class="p">))</span> <span class="p">{</span>
          <span class="nv">$err</span> <span class="o">=</span> <span class="s1">&#39;ERROR: Line &#39;</span><span class="o">.</span> <span class="p">(</span><span class="nv">$linenum</span> <span class="o">+</span> <span class="m">1</span><span class="p">)</span> <span class="o">.</span><span class="s1">&#39; in your input YAML begins&#39;</span><span class="o">.</span>
                 <span class="s1">&#39; with a tab.  YAML only recognizes spaces.  Please reformat.&#39;</span><span class="p">;</span>
          <span class="k">die</span><span class="p">(</span><span class="nv">$err</span><span class="p">);</span>
        <span class="p">}</span>
        
        <span class="k">if</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_inBlock</span> <span class="o">===</span> <span class="k">false</span> <span class="o">&amp;&amp;</span> <span class="k">empty</span><span class="p">(</span><span class="nv">$ifchk</span><span class="p">))</span> <span class="p">{</span>
          <span class="k">continue</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_inBlock</span> <span class="o">==</span> <span class="k">true</span> <span class="o">&amp;&amp;</span> <span class="k">empty</span><span class="p">(</span><span class="nv">$ifchk</span><span class="p">))</span> <span class="p">{</span>
          <span class="nv">$last</span> <span class="o">=&amp;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_allNodes</span><span class="p">[</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_lastNode</span><span class="p">];</span>
          <span class="nv">$last</span><span class="o">-&gt;</span><span class="na">data</span><span class="p">[</span><span class="nb">key</span><span class="p">(</span><span class="nv">$last</span><span class="o">-&gt;</span><span class="na">data</span><span class="p">)]</span> <span class="o">.=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span><span class="nv">$ifchk</span><span class="p">{</span><span class="m">0</span><span class="p">}</span> <span class="o">!=</span> <span class="s1">&#39;#&#39;</span> <span class="o">&amp;&amp;</span> <span class="nb">substr</span><span class="p">(</span><span class="nv">$ifchk</span><span class="p">,</span><span class="m">0</span><span class="p">,</span><span class="m">3</span><span class="p">)</span> <span class="o">!=</span> <span class="s1">&#39;---&#39;</span><span class="p">)</span> <span class="p">{</span></pre></div>            </td>
          </tr>
                  <tr id="section-15">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <p>Create a new node and get its indent</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>          <span class="nv">$node</span>         <span class="o">=</span> <span class="k">new</span> <span class="nx">YAMLNode</span><span class="p">;</span>
          <span class="nv">$node</span><span class="o">-&gt;</span><span class="na">indent</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_getIndent</span><span class="p">(</span><span class="nv">$line</span><span class="p">);</span></pre></div>            </td>
          </tr>
                  <tr id="section-16">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <p>Check where the node lies in the hierarchy</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>          <span class="k">if</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_lastIndent</span> <span class="o">==</span> <span class="nv">$node</span><span class="o">-&gt;</span><span class="na">indent</span><span class="p">)</span> <span class="p">{</span></pre></div>            </td>
          </tr>
                  <tr id="section-17">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <p>If we're in a block, add the text to the parent's data</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>            <span class="k">if</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_inBlock</span> <span class="o">===</span> <span class="k">true</span><span class="p">)</span> <span class="p">{</span>
              <span class="nv">$parent</span> <span class="o">=&amp;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_allNodes</span><span class="p">[</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_lastNode</span><span class="p">];</span>
              <span class="nv">$parent</span><span class="o">-&gt;</span><span class="na">data</span><span class="p">[</span><span class="nb">key</span><span class="p">(</span><span class="nv">$parent</span><span class="o">-&gt;</span><span class="na">data</span><span class="p">)]</span> <span class="o">.=</span> <span class="nb">trim</span><span class="p">(</span><span class="nv">$line</span><span class="p">)</span><span class="o">.</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_blockEnd</span><span class="p">;</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span></pre></div>            </td>
          </tr>
                  <tr id="section-18">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p>The current node's parent is the same as the previous node's</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>              <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_allNodes</span><span class="p">[</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_lastNode</span><span class="p">]))</span> <span class="p">{</span>
                <span class="nv">$node</span><span class="o">-&gt;</span><span class="na">parent</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_allNodes</span><span class="p">[</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_lastNode</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">parent</span><span class="p">;</span>
              <span class="p">}</span>
            <span class="p">}</span>
          <span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_lastIndent</span> <span class="o">&lt;</span> <span class="nv">$node</span><span class="o">-&gt;</span><span class="na">indent</span><span class="p">)</span> <span class="p">{</span>            
            <span class="k">if</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_inBlock</span> <span class="o">===</span> <span class="k">true</span><span class="p">)</span> <span class="p">{</span>
              <span class="nv">$parent</span> <span class="o">=&amp;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_allNodes</span><span class="p">[</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_lastNode</span><span class="p">];</span>
              <span class="nv">$parent</span><span class="o">-&gt;</span><span class="na">data</span><span class="p">[</span><span class="nb">key</span><span class="p">(</span><span class="nv">$parent</span><span class="o">-&gt;</span><span class="na">data</span><span class="p">)]</span> <span class="o">.=</span> <span class="nb">trim</span><span class="p">(</span><span class="nv">$line</span><span class="p">)</span><span class="o">.</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_blockEnd</span><span class="p">;</span>
            <span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_inBlock</span> <span class="o">===</span> <span class="k">false</span><span class="p">)</span> <span class="p">{</span></pre></div>            </td>
          </tr>
                  <tr id="section-19">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <p>The current node's parent is the previous node</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>              <span class="nv">$node</span><span class="o">-&gt;</span><span class="na">parent</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_lastNode</span><span class="p">;</span></pre></div>            </td>
          </tr>
                  <tr id="section-20">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <p>If the value of the last node's data was > or | we need to </p>
            </td>
            <td class="code">
              <div class="highlight"><pre></pre></div>            </td>
          </tr>
                  <tr id="section-21">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <p>start blocking i.e. taking in all lines as a text value until </p>
            </td>
            <td class="code">
              <div class="highlight"><pre></pre></div>            </td>
          </tr>
                  <tr id="section-22">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              <p>we drop our indent.</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>              <span class="nv">$parent</span> <span class="o">=&amp;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_allNodes</span><span class="p">[</span><span class="nv">$node</span><span class="o">-&gt;</span><span class="na">parent</span><span class="p">];</span>
              <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_allNodes</span><span class="p">[</span><span class="nv">$node</span><span class="o">-&gt;</span><span class="na">parent</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">children</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>
              <span class="k">if</span> <span class="p">(</span><span class="nb">is_array</span><span class="p">(</span><span class="nv">$parent</span><span class="o">-&gt;</span><span class="na">data</span><span class="p">))</span> <span class="p">{</span>
                <span class="nv">$chk</span> <span class="o">=</span> <span class="nv">$parent</span><span class="o">-&gt;</span><span class="na">data</span><span class="p">[</span><span class="nb">key</span><span class="p">(</span><span class="nv">$parent</span><span class="o">-&gt;</span><span class="na">data</span><span class="p">)];</span>
                <span class="k">if</span> <span class="p">(</span><span class="nv">$chk</span> <span class="o">===</span> <span class="s1">&#39;&gt;&#39;</span><span class="p">)</span> <span class="p">{</span>
                  <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_inBlock</span>  <span class="o">=</span> <span class="k">true</span><span class="p">;</span>
                  <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_blockEnd</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span><span class="p">;</span>
                  <span class="nv">$parent</span><span class="o">-&gt;</span><span class="na">data</span><span class="p">[</span><span class="nb">key</span><span class="p">(</span><span class="nv">$parent</span><span class="o">-&gt;</span><span class="na">data</span><span class="p">)]</span> <span class="o">=</span> 
                        <span class="nb">str_replace</span><span class="p">(</span><span class="s1">&#39;&gt;&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="nv">$parent</span><span class="o">-&gt;</span><span class="na">data</span><span class="p">[</span><span class="nb">key</span><span class="p">(</span><span class="nv">$parent</span><span class="o">-&gt;</span><span class="na">data</span><span class="p">)]);</span>
                  <span class="nv">$parent</span><span class="o">-&gt;</span><span class="na">data</span><span class="p">[</span><span class="nb">key</span><span class="p">(</span><span class="nv">$parent</span><span class="o">-&gt;</span><span class="na">data</span><span class="p">)]</span> <span class="o">.=</span> <span class="nb">trim</span><span class="p">(</span><span class="nv">$line</span><span class="p">)</span><span class="o">.</span><span class="s1">&#39; &#39;</span><span class="p">;</span>
                  <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_allNodes</span><span class="p">[</span><span class="nv">$node</span><span class="o">-&gt;</span><span class="na">parent</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">children</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
                  <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_lastIndent</span> <span class="o">=</span> <span class="nv">$node</span><span class="o">-&gt;</span><span class="na">indent</span><span class="p">;</span>
                <span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span><span class="nv">$chk</span> <span class="o">===</span> <span class="s1">&#39;|&#39;</span><span class="p">)</span> <span class="p">{</span>
                  <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_inBlock</span>  <span class="o">=</span> <span class="k">true</span><span class="p">;</span>
                  <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_blockEnd</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
                  <span class="nv">$parent</span><span class="o">-&gt;</span><span class="na">data</span><span class="p">[</span><span class="nb">key</span><span class="p">(</span><span class="nv">$parent</span><span class="o">-&gt;</span><span class="na">data</span><span class="p">)]</span> <span class="o">=</span>               
                        <span class="nb">str_replace</span><span class="p">(</span><span class="s1">&#39;|&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="nv">$parent</span><span class="o">-&gt;</span><span class="na">data</span><span class="p">[</span><span class="nb">key</span><span class="p">(</span><span class="nv">$parent</span><span class="o">-&gt;</span><span class="na">data</span><span class="p">)]);</span>
                  <span class="nv">$parent</span><span class="o">-&gt;</span><span class="na">data</span><span class="p">[</span><span class="nb">key</span><span class="p">(</span><span class="nv">$parent</span><span class="o">-&gt;</span><span class="na">data</span><span class="p">)]</span> <span class="o">.=</span> <span class="nb">trim</span><span class="p">(</span><span class="nv">$line</span><span class="p">)</span><span class="o">.</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
                  <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_allNodes</span><span class="p">[</span><span class="nv">$node</span><span class="o">-&gt;</span><span class="na">parent</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">children</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
                  <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_lastIndent</span> <span class="o">=</span> <span class="nv">$node</span><span class="o">-&gt;</span><span class="na">indent</span><span class="p">;</span>
                <span class="p">}</span>
              <span class="p">}</span>
            <span class="p">}</span>
          <span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_lastIndent</span> <span class="o">&gt;</span> <span class="nv">$node</span><span class="o">-&gt;</span><span class="na">indent</span><span class="p">)</span> <span class="p">{</span></pre></div>            </td>
          </tr>
                  <tr id="section-23">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>
              <p>Any block we had going is dead now</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>            <span class="k">if</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_inBlock</span> <span class="o">===</span> <span class="k">true</span><span class="p">)</span> <span class="p">{</span>
              <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_inBlock</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
              <span class="k">if</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_blockEnd</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span> <span class="p">{</span>
                <span class="nv">$last</span> <span class="o">=&amp;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_allNodes</span><span class="p">[</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_lastNode</span><span class="p">];</span>
                <span class="nv">$last</span><span class="o">-&gt;</span><span class="na">data</span><span class="p">[</span><span class="nb">key</span><span class="p">(</span><span class="nv">$last</span><span class="o">-&gt;</span><span class="na">data</span><span class="p">)]</span> <span class="o">=</span> 
                      <span class="nb">trim</span><span class="p">(</span><span class="nv">$last</span><span class="o">-&gt;</span><span class="na">data</span><span class="p">[</span><span class="nb">key</span><span class="p">(</span><span class="nv">$last</span><span class="o">-&gt;</span><span class="na">data</span><span class="p">)]);</span>
              <span class="p">}</span>
            <span class="p">}</span></pre></div>            </td>
          </tr>
                  <tr id="section-24">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-24">&#182;</a>
              </div>
              <p>We don't know the parent of the node so we have to find it</p>
            </td>
            <td class="code">
              <div class="highlight"><pre></pre></div>            </td>
          </tr>
                  <tr id="section-25">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-25">&#182;</a>
              </div>
              <p>foreach ($this->_allNodes as $n) {</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>            <span class="k">foreach</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_indentSort</span><span class="p">[</span><span class="nv">$node</span><span class="o">-&gt;</span><span class="na">indent</span><span class="p">]</span> <span class="k">as</span> <span class="nv">$n</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">if</span> <span class="p">(</span><span class="nv">$n</span><span class="o">-&gt;</span><span class="na">indent</span> <span class="o">==</span> <span class="nv">$node</span><span class="o">-&gt;</span><span class="na">indent</span><span class="p">)</span> <span class="p">{</span>
                <span class="nv">$node</span><span class="o">-&gt;</span><span class="na">parent</span> <span class="o">=</span> <span class="nv">$n</span><span class="o">-&gt;</span><span class="na">parent</span><span class="p">;</span>
              <span class="p">}</span>
            <span class="p">}</span>
          <span class="p">}</span>
        
          <span class="k">if</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_inBlock</span> <span class="o">===</span> <span class="k">false</span><span class="p">)</span> <span class="p">{</span></pre></div>            </td>
          </tr>
                  <tr id="section-26">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-26">&#182;</a>
              </div>
              <p>Set these properties with information from our current node</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>            <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_lastIndent</span> <span class="o">=</span> <span class="nv">$node</span><span class="o">-&gt;</span><span class="na">indent</span><span class="p">;</span></pre></div>            </td>
          </tr>
                  <tr id="section-27">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-27">&#182;</a>
              </div>
              <p>Set the last node</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>            <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_lastNode</span> <span class="o">=</span> <span class="nv">$node</span><span class="o">-&gt;</span><span class="na">id</span><span class="p">;</span></pre></div>            </td>
          </tr>
                  <tr id="section-28">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-28">&#182;</a>
              </div>
              <p>Parse the YAML line and return its data</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>            <span class="nv">$node</span><span class="o">-&gt;</span><span class="na">data</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_parseLine</span><span class="p">(</span><span class="nv">$line</span><span class="p">);</span></pre></div>            </td>
          </tr>
                  <tr id="section-29">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-29">&#182;</a>
              </div>
              <p>Add the node to the master list</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>            <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_allNodes</span><span class="p">[</span><span class="nv">$node</span><span class="o">-&gt;</span><span class="na">id</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$node</span><span class="p">;</span></pre></div>            </td>
          </tr>
                  <tr id="section-30">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-30">&#182;</a>
              </div>
              <p>Add a reference to the node in an indent array</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>            <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_indentSort</span><span class="p">[</span><span class="nv">$node</span><span class="o">-&gt;</span><span class="na">indent</span><span class="p">][]</span> <span class="o">=&amp;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_allNodes</span><span class="p">[</span><span class="nv">$node</span><span class="o">-&gt;</span><span class="na">id</span><span class="p">];</span></pre></div>            </td>
          </tr>
                  <tr id="section-31">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-31">&#182;</a>
              </div>
              <p>Add a reference to the node in a References array if this node</p>
            </td>
            <td class="code">
              <div class="highlight"><pre></pre></div>            </td>
          </tr>
                  <tr id="section-32">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-32">&#182;</a>
              </div>
              <p>has a YAML reference in it.</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>            <span class="k">if</span> <span class="p">(</span> 
              <span class="p">(</span> <span class="p">(</span><span class="nb">is_array</span><span class="p">(</span><span class="nv">$node</span><span class="o">-&gt;</span><span class="na">data</span><span class="p">))</span> <span class="o">&amp;&amp;</span>
                <span class="nb">isset</span><span class="p">(</span><span class="nv">$node</span><span class="o">-&gt;</span><span class="na">data</span><span class="p">[</span><span class="nb">key</span><span class="p">(</span><span class="nv">$node</span><span class="o">-&gt;</span><span class="na">data</span><span class="p">)])</span> <span class="o">&amp;&amp;</span>
                <span class="p">(</span><span class="o">!</span><span class="nb">is_array</span><span class="p">(</span><span class="nv">$node</span><span class="o">-&gt;</span><span class="na">data</span><span class="p">[</span><span class="nb">key</span><span class="p">(</span><span class="nv">$node</span><span class="o">-&gt;</span><span class="na">data</span><span class="p">)]))</span> <span class="p">)</span>
              <span class="o">&amp;&amp;</span>
              <span class="p">(</span> <span class="p">(</span><span class="nb">preg_match</span><span class="p">(</span><span class="s1">&#39;/^&amp;([^ ]+)/&#39;</span><span class="p">,</span><span class="nv">$node</span><span class="o">-&gt;</span><span class="na">data</span><span class="p">[</span><span class="nb">key</span><span class="p">(</span><span class="nv">$node</span><span class="o">-&gt;</span><span class="na">data</span><span class="p">)]))</span> 
                <span class="o">||</span> 
                <span class="p">(</span><span class="nb">preg_match</span><span class="p">(</span><span class="s1">&#39;/^\*([^ ]+)/&#39;</span><span class="p">,</span><span class="nv">$node</span><span class="o">-&gt;</span><span class="na">data</span><span class="p">[</span><span class="nb">key</span><span class="p">(</span><span class="nv">$node</span><span class="o">-&gt;</span><span class="na">data</span><span class="p">)]))</span> <span class="p">)</span>
            <span class="p">)</span> <span class="p">{</span>
                <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_haveRefs</span><span class="p">[]</span> <span class="o">=&amp;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_allNodes</span><span class="p">[</span><span class="nv">$node</span><span class="o">-&gt;</span><span class="na">id</span><span class="p">];</span>
            <span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span>
              <span class="p">(</span> <span class="p">(</span><span class="nb">is_array</span><span class="p">(</span><span class="nv">$node</span><span class="o">-&gt;</span><span class="na">data</span><span class="p">))</span> <span class="o">&amp;&amp;</span>
                <span class="nb">isset</span><span class="p">(</span><span class="nv">$node</span><span class="o">-&gt;</span><span class="na">data</span><span class="p">[</span><span class="nb">key</span><span class="p">(</span><span class="nv">$node</span><span class="o">-&gt;</span><span class="na">data</span><span class="p">)])</span> <span class="o">&amp;&amp;</span>
                 <span class="p">(</span><span class="nb">is_array</span><span class="p">(</span><span class="nv">$node</span><span class="o">-&gt;</span><span class="na">data</span><span class="p">[</span><span class="nb">key</span><span class="p">(</span><span class="nv">$node</span><span class="o">-&gt;</span><span class="na">data</span><span class="p">)]))</span> <span class="p">)</span>
            <span class="p">)</span> <span class="p">{</span></pre></div>            </td>
          </tr>
                  <tr id="section-33">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-33">&#182;</a>
              </div>
              <p>Incomplete reference making code.  Ugly, needs cleaned up.</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>              <span class="k">foreach</span> <span class="p">(</span><span class="nv">$node</span><span class="o">-&gt;</span><span class="na">data</span><span class="p">[</span><span class="nb">key</span><span class="p">(</span><span class="nv">$node</span><span class="o">-&gt;</span><span class="na">data</span><span class="p">)]</span> <span class="k">as</span> <span class="nv">$d</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nb">is_array</span><span class="p">(</span><span class="nv">$d</span><span class="p">)</span> <span class="o">&amp;&amp;</span> 
                  <span class="p">(</span> <span class="p">(</span><span class="nb">preg_match</span><span class="p">(</span><span class="s1">&#39;/^&amp;([^ ]+)/&#39;</span><span class="p">,</span><span class="nv">$d</span><span class="p">))</span> 
                    <span class="o">||</span> 
                    <span class="p">(</span><span class="nb">preg_match</span><span class="p">(</span><span class="s1">&#39;/^\*([^ ]+)/&#39;</span><span class="p">,</span><span class="nv">$d</span><span class="p">))</span> <span class="p">)</span>
                  <span class="p">)</span> <span class="p">{</span>
                    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_haveRefs</span><span class="p">[]</span> <span class="o">=&amp;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_allNodes</span><span class="p">[</span><span class="nv">$node</span><span class="o">-&gt;</span><span class="na">id</span><span class="p">];</span>
                <span class="p">}</span>
              <span class="p">}</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
      <span class="nb">unset</span><span class="p">(</span><span class="nv">$node</span><span class="p">);</span></pre></div>            </td>
          </tr>
                  <tr id="section-34">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-34">&#182;</a>
              </div>
              <p>Here we travel through node-space and pick out references (&amp; and)</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>      <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_linkReferences</span><span class="p">();</span></pre></div>            </td>
          </tr>
                  <tr id="section-35">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-35">&#182;</a>
              </div>
              <p>Build the PHP array out of node-space</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>      <span class="nv">$trunk</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_buildArray</span><span class="p">();</span>
      <span class="k">return</span> <span class="nv">$trunk</span><span class="p">;</span>
    <span class="p">}</span></pre></div>            </td>
          </tr>
                  <tr id="section-36">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-36">&#182;</a>
              </div>
              <p>Dump PHP array to YAML</p>

<p>The dump method, when supplied with an array, will do its best
 to convert the array into friendly YAML.  Pretty simple.  Feel free to
 save the returned string as tasteful.yml and pass it around.</p>

<p>Oh, and you can decide how big the indent is and what the wordwrap
 for folding is.  Pretty cool -- just pass in 'false' for either if 
 you want to use the default.</p>

<p>Indent's default is 2 spaces, wordwrap's default is 40 characters.  And
 you can turn off wordwrap by passing in 0.</p>

<p><em class='docparam'>@access</em> public
<em class='docparam'>@return</em> string
<em class='docparam'>@param</em> array $array PHP array
<em class='docparam'>@param</em> int $indent Pass in false to use the default, which is 2 
<em class='docparam'>@param</em> int $wordwrap Pass in 0 for no wordwrap, false for default (40)</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>     <span class="k">public</span> <span class="k">function</span> <span class="nf">dump</span><span class="p">(</span><span class="nv">$array</span><span class="p">,</span><span class="nv">$indent</span> <span class="o">=</span> <span class="k">false</span><span class="p">,</span><span class="nv">$wordwrap</span> <span class="o">=</span> <span class="k">false</span><span class="p">)</span> <span class="p">{</span></pre></div>            </td>
          </tr>
                  <tr id="section-37">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-37">&#182;</a>
              </div>
              <p>Dumps to some very clean YAML.  We'll have to add some more features</p>
            </td>
            <td class="code">
              <div class="highlight"><pre></pre></div>            </td>
          </tr>
                  <tr id="section-38">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-38">&#182;</a>
              </div>
              <p>and options soon.  And better support for folding.</p>
            </td>
            <td class="code">
              <div class="highlight"><pre></pre></div>            </td>
          </tr>
                  <tr id="section-39">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-39">&#182;</a>
              </div>
              <p>New features and options.</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>      <span class="k">if</span> <span class="p">(</span><span class="nv">$indent</span> <span class="o">===</span> <span class="k">false</span> <span class="k">or</span> <span class="o">!</span><span class="nb">is_numeric</span><span class="p">(</span><span class="nv">$indent</span><span class="p">))</span> <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_dumpIndent</span> <span class="o">=</span> <span class="m">2</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_dumpIndent</span> <span class="o">=</span> <span class="nv">$indent</span><span class="p">;</span>
      <span class="p">}</span>
      
      <span class="k">if</span> <span class="p">(</span><span class="nv">$wordwrap</span> <span class="o">===</span> <span class="k">false</span> <span class="k">or</span> <span class="o">!</span><span class="nb">is_numeric</span><span class="p">(</span><span class="nv">$wordwrap</span><span class="p">))</span> <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_dumpWordWrap</span> <span class="o">=</span> <span class="m">40</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_dumpWordWrap</span> <span class="o">=</span> <span class="nv">$wordwrap</span><span class="p">;</span>
      <span class="p">}</span></pre></div>            </td>
          </tr>
                  <tr id="section-40">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-40">&#182;</a>
              </div>
              <p>New YAML document</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>      <span class="nv">$string</span> <span class="o">=</span> <span class="s2">&quot;---</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span></pre></div>            </td>
          </tr>
                  <tr id="section-41">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-41">&#182;</a>
              </div>
              <p>Start at the base of the array and move through it.</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>      <span class="k">foreach</span> <span class="p">(</span><span class="nv">$array</span> <span class="k">as</span> <span class="nv">$key</span> <span class="o">=&gt;</span> <span class="nv">$value</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$string</span> <span class="o">.=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_yamlize</span><span class="p">(</span><span class="nv">$key</span><span class="p">,</span><span class="nv">$value</span><span class="p">,</span><span class="m">0</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nv">$string</span><span class="p">;</span>
    <span class="p">}</span></pre></div>            </td>
          </tr>
                  <tr id="section-42">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-42">&#182;</a>
              </div>
              <p>Private Properties </p>
            </td>
            <td class="code">
              <div class="highlight"><pre></pre></div>            </td>
          </tr>
                  <tr id="section-43">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-43">&#182;</a>
              </div>
              <p>/*#@+
<em class='docparam'>@access</em> private
<em class='docparam'>@var</em> mixed</p>
            </td>
            <td class="code">
              <div class="highlight"><pre> 
    <span class="k">private</span> <span class="nv">$_haveRefs</span><span class="p">;</span>
    <span class="k">private</span> <span class="nv">$_allNodes</span><span class="p">;</span>
    <span class="k">private</span> <span class="nv">$_lastIndent</span><span class="p">;</span>
    <span class="k">private</span> <span class="nv">$_lastNode</span><span class="p">;</span>
    <span class="k">private</span> <span class="nv">$_inBlock</span><span class="p">;</span>
    <span class="k">private</span> <span class="nv">$_isInline</span><span class="p">;</span>
    <span class="k">private</span> <span class="nv">$_dumpIndent</span><span class="p">;</span>
    <span class="k">private</span> <span class="nv">$_dumpWordWrap</span><span class="p">;</span></pre></div>            </td>
          </tr>
                  <tr id="section-44">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-44">&#182;</a>
              </div>
              <p>/**#@+</p>
            </td>
            <td class="code">
              <div class="highlight"><pre></pre></div>            </td>
          </tr>
                  <tr id="section-45">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-45">&#182;</a>
              </div>
              <p>Private Methods </p>
            </td>
            <td class="code">
              <div class="highlight"><pre></pre></div>            </td>
          </tr>
                  <tr id="section-46">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-46">&#182;</a>
              </div>
              <p>Attempts to convert a key / value array item to YAML
<em class='docparam'>@access</em> private
<em class='docparam'>@return</em> string
<em class='docparam'>@param</em> $key The name of the key
<em class='docparam'>@param</em> $value The value of the item
<em class='docparam'>@param</em> $indent The indent of the current node</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>    
     <span class="k">private</span> <span class="k">function</span> <span class="nf">_yamlize</span><span class="p">(</span><span class="nv">$key</span><span class="p">,</span><span class="nv">$value</span><span class="p">,</span><span class="nv">$indent</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nb">is_array</span><span class="p">(</span><span class="nv">$value</span><span class="p">))</span> <span class="p">{</span></pre></div>            </td>
          </tr>
                  <tr id="section-47">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-47">&#182;</a>
              </div>
              <p>It has children.  What to do?</p>
            </td>
            <td class="code">
              <div class="highlight"><pre></pre></div>            </td>
          </tr>
                  <tr id="section-48">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-48">&#182;</a>
              </div>
              <p>Make it the right kind of item</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>        <span class="nv">$string</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_dumpNode</span><span class="p">(</span><span class="nv">$key</span><span class="p">,</span><span class="k">NULL</span><span class="p">,</span><span class="nv">$indent</span><span class="p">);</span></pre></div>            </td>
          </tr>
                  <tr id="section-49">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-49">&#182;</a>
              </div>
              <p>Add the indent</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>        <span class="nv">$indent</span> <span class="o">+=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_dumpIndent</span><span class="p">;</span></pre></div>            </td>
          </tr>
                  <tr id="section-50">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-50">&#182;</a>
              </div>
              <p>Yamlize the array</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>        <span class="nv">$string</span> <span class="o">.=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_yamlizeArray</span><span class="p">(</span><span class="nv">$value</span><span class="p">,</span><span class="nv">$indent</span><span class="p">);</span>
      <span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span><span class="o">!</span><span class="nb">is_array</span><span class="p">(</span><span class="nv">$value</span><span class="p">))</span> <span class="p">{</span></pre></div>            </td>
          </tr>
                  <tr id="section-51">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-51">&#182;</a>
              </div>
              <p>It doesn't have children.  Yip.</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>        <span class="nv">$string</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_dumpNode</span><span class="p">(</span><span class="nv">$key</span><span class="p">,</span><span class="nv">$value</span><span class="p">,</span><span class="nv">$indent</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nv">$string</span><span class="p">;</span>
    <span class="p">}</span></pre></div>            </td>
          </tr>
                  <tr id="section-52">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-52">&#182;</a>
              </div>
              <p>Attempts to convert an array to YAML
<em class='docparam'>@access</em> private
<em class='docparam'>@return</em> string
<em class='docparam'>@param</em> $array The array you want to convert
<em class='docparam'>@param</em> $indent The indent of the current level</p>
            </td>
            <td class="code">
              <div class="highlight"><pre> 
     <span class="k">private</span> <span class="k">function</span> <span class="nf">_yamlizeArray</span><span class="p">(</span><span class="nv">$array</span><span class="p">,</span><span class="nv">$indent</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nb">is_array</span><span class="p">(</span><span class="nv">$array</span><span class="p">))</span> <span class="p">{</span>
        <span class="nv">$string</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
        <span class="k">foreach</span> <span class="p">(</span><span class="nv">$array</span> <span class="k">as</span> <span class="nv">$key</span> <span class="o">=&gt;</span> <span class="nv">$value</span><span class="p">)</span> <span class="p">{</span>
          <span class="nv">$string</span> <span class="o">.=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_yamlize</span><span class="p">(</span><span class="nv">$key</span><span class="p">,</span><span class="nv">$value</span><span class="p">,</span><span class="nv">$indent</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nv">$string</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">false</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span></pre></div>            </td>
          </tr>
                  <tr id="section-53">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-53">&#182;</a>
              </div>
              <p>Returns YAML from a key and a value
<em class='docparam'>@access</em> private
<em class='docparam'>@return</em> string
<em class='docparam'>@param</em> $key The name of the key
<em class='docparam'>@param</em> $value The value of the item
<em class='docparam'>@param</em> $indent The indent of the current node</p>
            </td>
            <td class="code">
              <div class="highlight"><pre> 
     <span class="k">private</span> <span class="k">function</span> <span class="nf">_dumpNode</span><span class="p">(</span><span class="nv">$key</span><span class="p">,</span><span class="nv">$value</span><span class="p">,</span><span class="nv">$indent</span><span class="p">)</span> <span class="p">{</span></pre></div>            </td>
          </tr>
                  <tr id="section-54">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-54">&#182;</a>
              </div>
              <p>do some folding here, for blocks</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>      <span class="k">if</span> <span class="p">(</span><span class="nb">strpos</span><span class="p">(</span><span class="nv">$value</span><span class="p">,</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">))</span> <span class="p">{</span>
        <span class="nv">$value</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_doLiteralBlock</span><span class="p">(</span><span class="nv">$value</span><span class="p">,</span><span class="nv">$indent</span><span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>  
        <span class="nv">$value</span>  <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_doFolding</span><span class="p">(</span><span class="nv">$value</span><span class="p">,</span><span class="nv">$indent</span><span class="p">);</span>
      <span class="p">}</span>
      
      <span class="nv">$spaces</span> <span class="o">=</span> <span class="nb">str_repeat</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span><span class="nv">$indent</span><span class="p">);</span>

      <span class="k">if</span> <span class="p">(</span><span class="nb">is_int</span><span class="p">(</span><span class="nv">$key</span><span class="p">))</span> <span class="p">{</span></pre></div>            </td>
          </tr>
                  <tr id="section-55">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-55">&#182;</a>
              </div>
              <p>It's a sequence</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>        <span class="nv">$string</span> <span class="o">=</span> <span class="nv">$spaces</span><span class="o">.</span><span class="s1">&#39;- &#39;</span><span class="o">.</span><span class="nv">$value</span><span class="o">.</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span></pre></div>            </td>
          </tr>
                  <tr id="section-56">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-56">&#182;</a>
              </div>
              <p>It's mapped</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>        <span class="nv">$string</span> <span class="o">=</span> <span class="nv">$spaces</span><span class="o">.</span><span class="nv">$key</span><span class="o">.</span><span class="s1">&#39;: &#39;</span><span class="o">.</span><span class="nv">$value</span><span class="o">.</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nv">$string</span><span class="p">;</span>
    <span class="p">}</span></pre></div>            </td>
          </tr>
                  <tr id="section-57">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-57">&#182;</a>
              </div>
              <p>Creates a literal block for dumping
<em class='docparam'>@access</em> private
<em class='docparam'>@return</em> string
<em class='docparam'>@param</em> $value 
<em class='docparam'>@param</em> $indent int The value of the indent</p>
            </td>
            <td class="code">
              <div class="highlight"><pre> 
     <span class="k">private</span> <span class="k">function</span> <span class="nf">_doLiteralBlock</span><span class="p">(</span><span class="nv">$value</span><span class="p">,</span><span class="nv">$indent</span><span class="p">)</span> <span class="p">{</span>
      <span class="nv">$exploded</span> <span class="o">=</span> <span class="nb">explode</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span><span class="nv">$value</span><span class="p">);</span>
      <span class="nv">$newValue</span> <span class="o">=</span> <span class="s1">&#39;|&#39;</span><span class="p">;</span>
      <span class="nv">$indent</span>  <span class="o">+=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_dumpIndent</span><span class="p">;</span>
      <span class="nv">$spaces</span>   <span class="o">=</span> <span class="nb">str_repeat</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span><span class="nv">$indent</span><span class="p">);</span>
      <span class="k">foreach</span> <span class="p">(</span><span class="nv">$exploded</span> <span class="k">as</span> <span class="nv">$line</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$newValue</span> <span class="o">.=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">.</span> <span class="nv">$spaces</span> <span class="o">.</span> <span class="nb">trim</span><span class="p">(</span><span class="nv">$line</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nv">$newValue</span><span class="p">;</span>
    <span class="p">}</span></pre></div>            </td>
          </tr>
                  <tr id="section-58">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-58">&#182;</a>
              </div>
              <p>Folds a string of text, if necessary
<em class='docparam'>@access</em> private
<em class='docparam'>@return</em> string
<em class='docparam'>@param</em> $value The string you wish to fold</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>     <span class="k">private</span> <span class="k">function</span> <span class="nf">_doFolding</span><span class="p">(</span><span class="nv">$value</span><span class="p">,</span><span class="nv">$indent</span><span class="p">)</span> <span class="p">{</span></pre></div>            </td>
          </tr>
                  <tr id="section-59">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-59">&#182;</a>
              </div>
              <p>Don't do anything if wordwrap is set to 0</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>      <span class="k">if</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_dumpWordWrap</span> <span class="o">===</span> <span class="m">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$value</span><span class="p">;</span>
      <span class="p">}</span>
      
      <span class="k">if</span> <span class="p">(</span><span class="nb">strlen</span><span class="p">(</span><span class="nv">$value</span><span class="p">)</span> <span class="o">&gt;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_dumpWordWrap</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$indent</span> <span class="o">+=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_dumpIndent</span><span class="p">;</span>
        <span class="nv">$indent</span> <span class="o">=</span> <span class="nb">str_repeat</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span><span class="nv">$indent</span><span class="p">);</span>
        <span class="nv">$wrapped</span> <span class="o">=</span> <span class="nb">wordwrap</span><span class="p">(</span><span class="nv">$value</span><span class="p">,</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_dumpWordWrap</span><span class="p">,</span><span class="s2">&quot;</span><span class="se">\n</span><span class="si">$indent</span><span class="s2">&quot;</span><span class="p">);</span>
        <span class="nv">$value</span>   <span class="o">=</span> <span class="s2">&quot;&gt;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="nv">$indent</span><span class="o">.</span><span class="nv">$wrapped</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nv">$value</span><span class="p">;</span>
    <span class="p">}</span></pre></div>            </td>
          </tr>
                  <tr id="section-60">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-60">&#182;</a>
              </div>
              <p>Methods used in loading </p>
            </td>
            <td class="code">
              <div class="highlight"><pre></pre></div>            </td>
          </tr>
                  <tr id="section-61">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-61">&#182;</a>
              </div>
              <p>Finds and returns the indentation of a YAML line
<em class='docparam'>@access</em> private
<em class='docparam'>@return</em> int
<em class='docparam'>@param</em> string $line A line from the YAML file</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>     <span class="k">private</span> <span class="k">function</span> <span class="nf">_getIndent</span><span class="p">(</span><span class="nv">$line</span><span class="p">)</span> <span class="p">{</span>
      <span class="nb">preg_match</span><span class="p">(</span><span class="s1">&#39;/^\s{1,}/&#39;</span><span class="p">,</span><span class="nv">$line</span><span class="p">,</span><span class="nv">$match</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$match</span><span class="p">[</span><span class="m">0</span><span class="p">]))</span> <span class="p">{</span>
        <span class="nv">$indent</span> <span class="o">=</span> <span class="nb">substr_count</span><span class="p">(</span><span class="nv">$match</span><span class="p">[</span><span class="m">0</span><span class="p">],</span><span class="s1">&#39; &#39;</span><span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$indent</span> <span class="o">=</span> <span class="m">0</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nv">$indent</span><span class="p">;</span>
    <span class="p">}</span></pre></div>            </td>
          </tr>
                  <tr id="section-62">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-62">&#182;</a>
              </div>
              <p>Parses YAML code and returns an array for a node
<em class='docparam'>@access</em> private
<em class='docparam'>@return</em> array
<em class='docparam'>@param</em> string $line A line from the YAML file</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>     <span class="k">private</span> <span class="k">function</span> <span class="nf">_parseLine</span><span class="p">(</span><span class="nv">$line</span><span class="p">)</span> <span class="p">{</span>
      <span class="nv">$line</span> <span class="o">=</span> <span class="nb">trim</span><span class="p">(</span><span class="nv">$line</span><span class="p">);</span>  

      <span class="nv">$array</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>

      <span class="k">if</span> <span class="p">(</span><span class="nb">preg_match</span><span class="p">(</span><span class="s1">&#39;/^-(.*):$/&#39;</span><span class="p">,</span><span class="nv">$line</span><span class="p">))</span> <span class="p">{</span></pre></div>            </td>
          </tr>
                  <tr id="section-63">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-63">&#182;</a>
              </div>
              <p>It's a mapped sequence</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>        <span class="nv">$key</span>         <span class="o">=</span> <span class="nb">trim</span><span class="p">(</span><span class="nb">substr</span><span class="p">(</span><span class="nb">substr</span><span class="p">(</span><span class="nv">$line</span><span class="p">,</span><span class="m">1</span><span class="p">),</span><span class="m">0</span><span class="p">,</span><span class="o">-</span><span class="m">1</span><span class="p">));</span>
        <span class="nv">$array</span><span class="p">[</span><span class="nv">$key</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span><span class="nv">$line</span><span class="p">[</span><span class="m">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;-&#39;</span> <span class="o">&amp;&amp;</span> <span class="nb">substr</span><span class="p">(</span><span class="nv">$line</span><span class="p">,</span><span class="m">0</span><span class="p">,</span><span class="m">3</span><span class="p">)</span> <span class="o">!=</span> <span class="s1">&#39;---&#39;</span><span class="p">)</span> <span class="p">{</span></pre></div>            </td>
          </tr>
                  <tr id="section-64">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-64">&#182;</a>
              </div>
              <p>It's a list item but not a new stream</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>        <span class="k">if</span> <span class="p">(</span><span class="nb">strlen</span><span class="p">(</span><span class="nv">$line</span><span class="p">)</span> <span class="o">&gt;</span> <span class="m">1</span><span class="p">)</span> <span class="p">{</span>
          <span class="nv">$value</span>   <span class="o">=</span> <span class="nb">trim</span><span class="p">(</span><span class="nb">substr</span><span class="p">(</span><span class="nv">$line</span><span class="p">,</span><span class="m">1</span><span class="p">));</span></pre></div>            </td>
          </tr>
                  <tr id="section-65">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-65">&#182;</a>
              </div>
              <p>Set the type of the value.  Int, string, etc</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>          <span class="nv">$value</span>   <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_toType</span><span class="p">(</span><span class="nv">$value</span><span class="p">);</span>
          <span class="nv">$array</span><span class="p">[]</span> <span class="o">=</span> <span class="nv">$value</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nv">$array</span><span class="p">[]</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
        <span class="p">}</span>
      <span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span><span class="nb">preg_match</span><span class="p">(</span><span class="s1">&#39;/^(.+):/&#39;</span><span class="p">,</span><span class="nv">$line</span><span class="p">,</span><span class="nv">$key</span><span class="p">))</span> <span class="p">{</span></pre></div>            </td>
          </tr>
                  <tr id="section-66">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-66">&#182;</a>
              </div>
              <p>It's a key/value pair most likely</p>
            </td>
            <td class="code">
              <div class="highlight"><pre></pre></div>            </td>
          </tr>
                  <tr id="section-67">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-67">&#182;</a>
              </div>
              <p>If the key is in double quotes pull it out</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>        <span class="k">if</span> <span class="p">(</span><span class="nb">preg_match</span><span class="p">(</span><span class="s1">&#39;/^([&quot;\&#39;](.*)[&quot;\&#39;](\s)*:)/&#39;</span><span class="p">,</span><span class="nv">$line</span><span class="p">,</span><span class="nv">$matches</span><span class="p">))</span> <span class="p">{</span>
          <span class="nv">$value</span> <span class="o">=</span> <span class="nb">trim</span><span class="p">(</span><span class="nb">str_replace</span><span class="p">(</span><span class="nv">$matches</span><span class="p">[</span><span class="m">1</span><span class="p">],</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="nv">$line</span><span class="p">));</span>
          <span class="nv">$key</span>   <span class="o">=</span> <span class="nv">$matches</span><span class="p">[</span><span class="m">2</span><span class="p">];</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span></pre></div>            </td>
          </tr>
                  <tr id="section-68">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-68">&#182;</a>
              </div>
              <p>Do some guesswork as to the key and the value</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>          <span class="nv">$explode</span> <span class="o">=</span> <span class="nb">explode</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">,</span><span class="nv">$line</span><span class="p">);</span>
          <span class="nv">$key</span>     <span class="o">=</span> <span class="nb">trim</span><span class="p">(</span><span class="nv">$explode</span><span class="p">[</span><span class="m">0</span><span class="p">]);</span>
          <span class="nb">array_shift</span><span class="p">(</span><span class="nv">$explode</span><span class="p">);</span>
          <span class="nv">$value</span>   <span class="o">=</span> <span class="nb">trim</span><span class="p">(</span><span class="nb">implode</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">,</span><span class="nv">$explode</span><span class="p">));</span>
        <span class="p">}</span></pre></div>            </td>
          </tr>
                  <tr id="section-69">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-69">&#182;</a>
              </div>
              <p>Set the type of the value.  Int, string, etc</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>        <span class="nv">$value</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_toType</span><span class="p">(</span><span class="nv">$value</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">empty</span><span class="p">(</span><span class="nv">$key</span><span class="p">))</span> <span class="p">{</span>
          <span class="nv">$array</span><span class="p">[]</span>     <span class="o">=</span> <span class="nv">$value</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nv">$array</span><span class="p">[</span><span class="nv">$key</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$value</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nv">$array</span><span class="p">;</span>
    <span class="p">}</span></pre></div>            </td>
          </tr>
                  <tr id="section-70">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-70">&#182;</a>
              </div>
              <p>Finds the type of the passed value, returns the value as the new type.
<em class='docparam'>@access</em> private
<em class='docparam'>@param</em> string $value
<em class='docparam'>@return</em> mixed</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>     <span class="k">private</span> <span class="k">function</span> <span class="nf">_toType</span><span class="p">(</span><span class="nv">$value</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nb">preg_match</span><span class="p">(</span><span class="s1">&#39;/^(&quot;(.*)&quot;|\&#39;(.*)\&#39;)/&#39;</span><span class="p">,</span><span class="nv">$value</span><span class="p">,</span><span class="nv">$matches</span><span class="p">))</span> <span class="p">{</span>        
       <span class="nv">$value</span> <span class="o">=</span> <span class="p">(</span><span class="nx">string</span><span class="p">)</span><span class="nb">preg_replace</span><span class="p">(</span><span class="s1">&#39;/(\&#39;\&#39;|\\\\\&#39;)/&#39;</span><span class="p">,</span><span class="s2">&quot;&#39;&quot;</span><span class="p">,</span><span class="nb">end</span><span class="p">(</span><span class="nv">$matches</span><span class="p">));</span>
       <span class="nv">$value</span> <span class="o">=</span> <span class="nb">preg_replace</span><span class="p">(</span><span class="s1">&#39;/\\\\&quot;/&#39;</span><span class="p">,</span><span class="s1">&#39;&quot;&#39;</span><span class="p">,</span><span class="nv">$value</span><span class="p">);</span>
      <span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span><span class="nb">preg_match</span><span class="p">(</span><span class="s1">&#39;/^\\[(.+)\\]$/&#39;</span><span class="p">,</span><span class="nv">$value</span><span class="p">,</span><span class="nv">$matches</span><span class="p">))</span> <span class="p">{</span></pre></div>            </td>
          </tr>
                  <tr id="section-71">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-71">&#182;</a>
              </div>
              <p>Inline Sequence</p>
            </td>
            <td class="code">
              <div class="highlight"><pre></pre></div>            </td>
          </tr>
                  <tr id="section-72">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-72">&#182;</a>
              </div>
              <p>Take out strings sequences and mappings</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>        <span class="nv">$explode</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_inlineEscape</span><span class="p">(</span><span class="nv">$matches</span><span class="p">[</span><span class="m">1</span><span class="p">]);</span></pre></div>            </td>
          </tr>
                  <tr id="section-73">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-73">&#182;</a>
              </div>
              <p>Propogate value array</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>        <span class="nv">$value</span>  <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
        <span class="k">foreach</span> <span class="p">(</span><span class="nv">$explode</span> <span class="k">as</span> <span class="nv">$v</span><span class="p">)</span> <span class="p">{</span>
          <span class="nv">$value</span><span class="p">[]</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_toType</span><span class="p">(</span><span class="nv">$v</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span><span class="nb">strpos</span><span class="p">(</span><span class="nv">$value</span><span class="p">,</span><span class="s1">&#39;: &#39;</span><span class="p">)</span><span class="o">!==</span><span class="k">false</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nb">preg_match</span><span class="p">(</span><span class="s1">&#39;/^{(.+)/&#39;</span><span class="p">,</span><span class="nv">$value</span><span class="p">))</span> <span class="p">{</span></pre></div>            </td>
          </tr>
                  <tr id="section-74">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-74">&#182;</a>
              </div>
              <p>It's a map</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>          <span class="nv">$array</span> <span class="o">=</span> <span class="nb">explode</span><span class="p">(</span><span class="s1">&#39;: &#39;</span><span class="p">,</span><span class="nv">$value</span><span class="p">);</span>
          <span class="nv">$key</span>   <span class="o">=</span> <span class="nb">trim</span><span class="p">(</span><span class="nv">$array</span><span class="p">[</span><span class="m">0</span><span class="p">]);</span>
          <span class="nb">array_shift</span><span class="p">(</span><span class="nv">$array</span><span class="p">);</span>
          <span class="nv">$value</span> <span class="o">=</span> <span class="nb">trim</span><span class="p">(</span><span class="nb">implode</span><span class="p">(</span><span class="s1">&#39;: &#39;</span><span class="p">,</span><span class="nv">$array</span><span class="p">));</span>
          <span class="nv">$value</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_toType</span><span class="p">(</span><span class="nv">$value</span><span class="p">);</span>
          <span class="nv">$value</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="nv">$key</span> <span class="o">=&gt;</span> <span class="nv">$value</span><span class="p">);</span>
      <span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span><span class="nb">preg_match</span><span class="p">(</span><span class="s2">&quot;/{(.+)}$/&quot;</span><span class="p">,</span><span class="nv">$value</span><span class="p">,</span><span class="nv">$matches</span><span class="p">))</span> <span class="p">{</span></pre></div>            </td>
          </tr>
                  <tr id="section-75">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-75">&#182;</a>
              </div>
              <p>Inline Mapping</p>
            </td>
            <td class="code">
              <div class="highlight"><pre></pre></div>            </td>
          </tr>
                  <tr id="section-76">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-76">&#182;</a>
              </div>
              <p>Take out strings sequences and mappings</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>        <span class="nv">$explode</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_inlineEscape</span><span class="p">(</span><span class="nv">$matches</span><span class="p">[</span><span class="m">1</span><span class="p">]);</span></pre></div>            </td>
          </tr>
                  <tr id="section-77">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-77">&#182;</a>
              </div>
              <p>Propogate value array</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>        <span class="nv">$array</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
        <span class="k">foreach</span> <span class="p">(</span><span class="nv">$explode</span> <span class="k">as</span> <span class="nv">$v</span><span class="p">)</span> <span class="p">{</span>
          <span class="nv">$array</span> <span class="o">=</span> <span class="nv">$array</span> <span class="o">+</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_toType</span><span class="p">(</span><span class="nv">$v</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="nv">$value</span> <span class="o">=</span> <span class="nv">$array</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span><span class="nb">strtolower</span><span class="p">(</span><span class="nv">$value</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;null&#39;</span> <span class="k">or</span> <span class="nv">$value</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span> <span class="k">or</span> <span class="nv">$value</span> <span class="o">==</span> <span class="s1">&#39;~&#39;</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$value</span> <span class="o">=</span> <span class="k">NULL</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span><span class="nb">ctype_digit</span><span class="p">(</span><span class="nv">$value</span><span class="p">))</span> <span class="p">{</span>
        <span class="nv">$value</span> <span class="o">=</span> <span class="p">(</span><span class="nx">int</span><span class="p">)</span><span class="nv">$value</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span><span class="nb">in_array</span><span class="p">(</span><span class="nb">strtolower</span><span class="p">(</span><span class="nv">$value</span><span class="p">),</span> 
                  <span class="k">array</span><span class="p">(</span><span class="s1">&#39;true&#39;</span><span class="p">,</span> <span class="s1">&#39;on&#39;</span><span class="p">,</span> <span class="s1">&#39;+&#39;</span><span class="p">,</span> <span class="s1">&#39;yes&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">)))</span> <span class="p">{</span>
        <span class="nv">$value</span> <span class="o">=</span> <span class="k">TRUE</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span><span class="nb">in_array</span><span class="p">(</span><span class="nb">strtolower</span><span class="p">(</span><span class="nv">$value</span><span class="p">),</span> 
                  <span class="k">array</span><span class="p">(</span><span class="s1">&#39;false&#39;</span><span class="p">,</span> <span class="s1">&#39;off&#39;</span><span class="p">,</span> <span class="s1">&#39;-&#39;</span><span class="p">,</span> <span class="s1">&#39;no&#39;</span><span class="p">,</span> <span class="s1">&#39;n&#39;</span><span class="p">)))</span> <span class="p">{</span>
        <span class="nv">$value</span> <span class="o">=</span> <span class="k">FALSE</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span><span class="nb">is_numeric</span><span class="p">(</span><span class="nv">$value</span><span class="p">))</span> <span class="p">{</span>
        <span class="nv">$value</span> <span class="o">=</span> <span class="p">(</span><span class="nx">float</span><span class="p">)</span><span class="nv">$value</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span></pre></div>            </td>
          </tr>
                  <tr id="section-78">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-78">&#182;</a>
              </div>
              <p>Just a normal string, right?</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>        <span class="nv">$value</span> <span class="o">=</span> <span class="nb">trim</span><span class="p">(</span><span class="nb">preg_replace</span><span class="p">(</span><span class="s1">&#39;/#(.+)$/&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="nv">$value</span><span class="p">));</span>
      <span class="p">}</span>
      
      <span class="k">return</span> <span class="nv">$value</span><span class="p">;</span>
    <span class="p">}</span></pre></div>            </td>
          </tr>
                  <tr id="section-79">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-79">&#182;</a>
              </div>
              <p>Used in inlines to check for more inlines or quoted strings
<em class='docparam'>@access</em> private
<em class='docparam'>@return</em> array</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>     <span class="k">private</span> <span class="k">function</span> <span class="nf">_inlineEscape</span><span class="p">(</span><span class="nv">$inline</span><span class="p">)</span> <span class="p">{</span></pre></div>            </td>
          </tr>
                  <tr id="section-80">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-80">&#182;</a>
              </div>
              <p>There's gotta be a cleaner way to do this...</p>
            </td>
            <td class="code">
              <div class="highlight"><pre></pre></div>            </td>
          </tr>
                  <tr id="section-81">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-81">&#182;</a>
              </div>
              <p>While pure sequences seem to be nesting just fine,</p>
            </td>
            <td class="code">
              <div class="highlight"><pre></pre></div>            </td>
          </tr>
                  <tr id="section-82">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-82">&#182;</a>
              </div>
              <p>pure mappings and mappings with sequences inside can't go very</p>
            </td>
            <td class="code">
              <div class="highlight"><pre></pre></div>            </td>
          </tr>
                  <tr id="section-83">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-83">&#182;</a>
              </div>
              <p>deep.  This needs to be fixed.</p>
            </td>
            <td class="code">
              <div class="highlight"><pre></pre></div>            </td>
          </tr>
                  <tr id="section-84">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-84">&#182;</a>
              </div>
              <p>Check for strings      </p>
            </td>
            <td class="code">
              <div class="highlight"><pre>      <span class="nv">$regex</span> <span class="o">=</span> <span class="s1">&#39;/(?:(&quot;)|(?:\&#39;))((?(1)[^&quot;]+|[^\&#39;]+))(?(1)&quot;|\&#39;)/&#39;</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nb">preg_match_all</span><span class="p">(</span><span class="nv">$regex</span><span class="p">,</span><span class="nv">$inline</span><span class="p">,</span><span class="nv">$strings</span><span class="p">))</span> <span class="p">{</span>
        <span class="nv">$saved_strings</span><span class="p">[]</span> <span class="o">=</span> <span class="nv">$strings</span><span class="p">[</span><span class="m">0</span><span class="p">][</span><span class="m">0</span><span class="p">];</span>
        <span class="nv">$inline</span>  <span class="o">=</span> <span class="nb">preg_replace</span><span class="p">(</span><span class="nv">$regex</span><span class="p">,</span><span class="s1">&#39;YAMLString&#39;</span><span class="p">,</span><span class="nv">$inline</span><span class="p">);</span> 
      <span class="p">}</span>
      <span class="nb">unset</span><span class="p">(</span><span class="nv">$regex</span><span class="p">);</span></pre></div>            </td>
          </tr>
                  <tr id="section-85">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-85">&#182;</a>
              </div>
              <p>Check for sequences</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>      <span class="k">if</span> <span class="p">(</span><span class="nb">preg_match_all</span><span class="p">(</span><span class="s1">&#39;/\[(.+)\]/U&#39;</span><span class="p">,</span><span class="nv">$inline</span><span class="p">,</span><span class="nv">$seqs</span><span class="p">))</span> <span class="p">{</span>
        <span class="nv">$inline</span> <span class="o">=</span> <span class="nb">preg_replace</span><span class="p">(</span><span class="s1">&#39;/\[(.+)\]/U&#39;</span><span class="p">,</span><span class="s1">&#39;YAMLSeq&#39;</span><span class="p">,</span><span class="nv">$inline</span><span class="p">);</span>
        <span class="nv">$seqs</span>   <span class="o">=</span> <span class="nv">$seqs</span><span class="p">[</span><span class="m">0</span><span class="p">];</span>
      <span class="p">}</span></pre></div>            </td>
          </tr>
                  <tr id="section-86">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-86">&#182;</a>
              </div>
              <p>Check for mappings</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>      <span class="k">if</span> <span class="p">(</span><span class="nb">preg_match_all</span><span class="p">(</span><span class="s1">&#39;/{(.+)}/U&#39;</span><span class="p">,</span><span class="nv">$inline</span><span class="p">,</span><span class="nv">$maps</span><span class="p">))</span> <span class="p">{</span>
        <span class="nv">$inline</span> <span class="o">=</span> <span class="nb">preg_replace</span><span class="p">(</span><span class="s1">&#39;/{(.+)}/U&#39;</span><span class="p">,</span><span class="s1">&#39;YAMLMap&#39;</span><span class="p">,</span><span class="nv">$inline</span><span class="p">);</span>
        <span class="nv">$maps</span>   <span class="o">=</span> <span class="nv">$maps</span><span class="p">[</span><span class="m">0</span><span class="p">];</span>
      <span class="p">}</span>
      
      <span class="nv">$explode</span> <span class="o">=</span> <span class="nb">explode</span><span class="p">(</span><span class="s1">&#39;, &#39;</span><span class="p">,</span><span class="nv">$inline</span><span class="p">);</span></pre></div>            </td>
          </tr>
                  <tr id="section-87">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-87">&#182;</a>
              </div>
              <p>Re-add the strings</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$saved_strings</span><span class="p">))</span> <span class="p">{</span>
        <span class="nv">$i</span> <span class="o">=</span> <span class="m">0</span><span class="p">;</span>
        <span class="k">foreach</span> <span class="p">(</span><span class="nv">$explode</span> <span class="k">as</span> <span class="nv">$key</span> <span class="o">=&gt;</span> <span class="nv">$value</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="nb">strpos</span><span class="p">(</span><span class="nv">$value</span><span class="p">,</span><span class="s1">&#39;YAMLString&#39;</span><span class="p">))</span> <span class="p">{</span>
            <span class="nv">$explode</span><span class="p">[</span><span class="nv">$key</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str_replace</span><span class="p">(</span><span class="s1">&#39;YAMLString&#39;</span><span class="p">,</span><span class="nv">$saved_strings</span><span class="p">[</span><span class="nv">$i</span><span class="p">],</span><span class="nv">$value</span><span class="p">);</span>
            <span class="o">++</span><span class="nv">$i</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span></pre></div>            </td>
          </tr>
                  <tr id="section-88">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-88">&#182;</a>
              </div>
              <p>Re-add the sequences</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$seqs</span><span class="p">))</span> <span class="p">{</span>
        <span class="nv">$i</span> <span class="o">=</span> <span class="m">0</span><span class="p">;</span>
        <span class="k">foreach</span> <span class="p">(</span><span class="nv">$explode</span> <span class="k">as</span> <span class="nv">$key</span> <span class="o">=&gt;</span> <span class="nv">$value</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="nb">strpos</span><span class="p">(</span><span class="nv">$value</span><span class="p">,</span><span class="s1">&#39;YAMLSeq&#39;</span><span class="p">)</span> <span class="o">!==</span> <span class="k">false</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$explode</span><span class="p">[</span><span class="nv">$key</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str_replace</span><span class="p">(</span><span class="s1">&#39;YAMLSeq&#39;</span><span class="p">,</span><span class="nv">$seqs</span><span class="p">[</span><span class="nv">$i</span><span class="p">],</span><span class="nv">$value</span><span class="p">);</span>
            <span class="o">++</span><span class="nv">$i</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span></pre></div>            </td>
          </tr>
                  <tr id="section-89">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-89">&#182;</a>
              </div>
              <p>Re-add the mappings</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$maps</span><span class="p">))</span> <span class="p">{</span>
        <span class="nv">$i</span> <span class="o">=</span> <span class="m">0</span><span class="p">;</span>
        <span class="k">foreach</span> <span class="p">(</span><span class="nv">$explode</span> <span class="k">as</span> <span class="nv">$key</span> <span class="o">=&gt;</span> <span class="nv">$value</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="nb">strpos</span><span class="p">(</span><span class="nv">$value</span><span class="p">,</span><span class="s1">&#39;YAMLMap&#39;</span><span class="p">)</span> <span class="o">!==</span> <span class="k">false</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$explode</span><span class="p">[</span><span class="nv">$key</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str_replace</span><span class="p">(</span><span class="s1">&#39;YAMLMap&#39;</span><span class="p">,</span><span class="nv">$maps</span><span class="p">[</span><span class="nv">$i</span><span class="p">],</span><span class="nv">$value</span><span class="p">);</span>
            <span class="o">++</span><span class="nv">$i</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
      
      <span class="k">return</span> <span class="nv">$explode</span><span class="p">;</span>
    <span class="p">}</span></pre></div>            </td>
          </tr>
                  <tr id="section-90">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-90">&#182;</a>
              </div>
              <p>Builds the PHP array from all the YAML nodes we've gathered
<em class='docparam'>@access</em> private
<em class='docparam'>@return</em> array</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>     <span class="k">private</span> <span class="k">function</span> <span class="nf">_buildArray</span><span class="p">()</span> <span class="p">{</span>
      <span class="nv">$trunk</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>

      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_indentSort</span><span class="p">[</span><span class="m">0</span><span class="p">]))</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$trunk</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="k">foreach</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_indentSort</span><span class="p">[</span><span class="m">0</span><span class="p">]</span> <span class="k">as</span> <span class="nv">$n</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">empty</span><span class="p">(</span><span class="nv">$n</span><span class="o">-&gt;</span><span class="na">parent</span><span class="p">))</span> <span class="p">{</span>
          <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_nodeArrayizeData</span><span class="p">(</span><span class="nv">$n</span><span class="p">);</span></pre></div>            </td>
          </tr>
                  <tr id="section-91">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-91">&#182;</a>
              </div>
              <p>Check for references and copy the needed data to complete them.</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>          <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_makeReferences</span><span class="p">(</span><span class="nv">$n</span><span class="p">);</span></pre></div>            </td>
          </tr>
                  <tr id="section-92">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-92">&#182;</a>
              </div>
              <p>Merge our data with the big array we're building</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>          <span class="nv">$trunk</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_array_kmerge</span><span class="p">(</span><span class="nv">$trunk</span><span class="p">,</span><span class="nv">$n</span><span class="o">-&gt;</span><span class="na">data</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
      
      <span class="k">return</span> <span class="nv">$trunk</span><span class="p">;</span>
    <span class="p">}</span></pre></div>            </td>
          </tr>
                  <tr id="section-93">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-93">&#182;</a>
              </div>
              <p>Traverses node-space and sets references (&amp; and *) accordingly
<em class='docparam'>@access</em> private
<em class='docparam'>@return</em> bool</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>     <span class="k">private</span> <span class="k">function</span> <span class="nf">_linkReferences</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nb">is_array</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_haveRefs</span><span class="p">))</span> <span class="p">{</span>
        <span class="k">foreach</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_haveRefs</span> <span class="k">as</span> <span class="nv">$node</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$node</span><span class="o">-&gt;</span><span class="na">data</span><span class="p">))</span> <span class="p">{</span>
            <span class="nv">$key</span> <span class="o">=</span> <span class="nb">key</span><span class="p">(</span><span class="nv">$node</span><span class="o">-&gt;</span><span class="na">data</span><span class="p">);</span></pre></div>            </td>
          </tr>
                  <tr id="section-94">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-94">&#182;</a>
              </div>
              <p>If it's an array, don't check.</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>            <span class="k">if</span> <span class="p">(</span><span class="nb">is_array</span><span class="p">(</span><span class="nv">$node</span><span class="o">-&gt;</span><span class="na">data</span><span class="p">[</span><span class="nv">$key</span><span class="p">]))</span> <span class="p">{</span>  
              <span class="k">foreach</span> <span class="p">(</span><span class="nv">$node</span><span class="o">-&gt;</span><span class="na">data</span><span class="p">[</span><span class="nv">$key</span><span class="p">]</span> <span class="k">as</span> <span class="nv">$k</span> <span class="o">=&gt;</span> <span class="nv">$v</span><span class="p">)</span> <span class="p">{</span>
                <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_linkRef</span><span class="p">(</span><span class="nv">$node</span><span class="p">,</span><span class="nv">$key</span><span class="p">,</span><span class="nv">$k</span><span class="p">,</span><span class="nv">$v</span><span class="p">);</span>
              <span class="p">}</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
              <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_linkRef</span><span class="p">(</span><span class="nv">$node</span><span class="p">,</span><span class="nv">$key</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">}</span> 
      <span class="p">}</span>
      <span class="k">return</span> <span class="k">true</span><span class="p">;</span>
    <span class="p">}</span>
    
    <span class="k">function</span> <span class="nf">_linkRef</span><span class="p">(</span><span class="o">&amp;</span><span class="nv">$n</span><span class="p">,</span><span class="nv">$key</span><span class="p">,</span><span class="nv">$k</span> <span class="o">=</span> <span class="k">NULL</span><span class="p">,</span><span class="nv">$v</span> <span class="o">=</span> <span class="k">NULL</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="k">empty</span><span class="p">(</span><span class="nv">$k</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="k">empty</span><span class="p">(</span><span class="nv">$v</span><span class="p">))</span> <span class="p">{</span></pre></div>            </td>
          </tr>
                  <tr id="section-95">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-95">&#182;</a>
              </div>
              <p>Look for &amp;refs</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>        <span class="k">if</span> <span class="p">(</span><span class="nb">preg_match</span><span class="p">(</span><span class="s1">&#39;/^&amp;([^ ]+)/&#39;</span><span class="p">,</span><span class="nv">$n</span><span class="o">-&gt;</span><span class="na">data</span><span class="p">[</span><span class="nv">$key</span><span class="p">],</span><span class="nv">$matches</span><span class="p">))</span> <span class="p">{</span></pre></div>            </td>
          </tr>
                  <tr id="section-96">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-96">&#182;</a>
              </div>
              <p>Flag the node so we know it's a reference</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>          <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_allNodes</span><span class="p">[</span><span class="nv">$n</span><span class="o">-&gt;</span><span class="na">id</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">ref</span> <span class="o">=</span> <span class="nb">substr</span><span class="p">(</span><span class="nv">$matches</span><span class="p">[</span><span class="m">0</span><span class="p">],</span><span class="m">1</span><span class="p">);</span>
          <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_allNodes</span><span class="p">[</span><span class="nv">$n</span><span class="o">-&gt;</span><span class="na">id</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">data</span><span class="p">[</span><span class="nv">$key</span><span class="p">]</span> <span class="o">=</span> 
                   <span class="nb">substr</span><span class="p">(</span><span class="nv">$n</span><span class="o">-&gt;</span><span class="na">data</span><span class="p">[</span><span class="nv">$key</span><span class="p">],</span><span class="nb">strlen</span><span class="p">(</span><span class="nv">$matches</span><span class="p">[</span><span class="m">0</span><span class="p">])</span><span class="o">+</span><span class="m">1</span><span class="p">);</span></pre></div>            </td>
          </tr>
                  <tr id="section-97">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-97">&#182;</a>
              </div>
              <p>Look forrefs</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>        <span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span><span class="nb">preg_match</span><span class="p">(</span><span class="s1">&#39;/^\*([^ ]+)/&#39;</span><span class="p">,</span><span class="nv">$n</span><span class="o">-&gt;</span><span class="na">data</span><span class="p">[</span><span class="nv">$key</span><span class="p">],</span><span class="nv">$matches</span><span class="p">))</span> <span class="p">{</span>
          <span class="nv">$ref</span> <span class="o">=</span> <span class="nb">substr</span><span class="p">(</span><span class="nv">$matches</span><span class="p">[</span><span class="m">0</span><span class="p">],</span><span class="m">1</span><span class="p">);</span></pre></div>            </td>
          </tr>
                  <tr id="section-98">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-98">&#182;</a>
              </div>
              <p>Flag the node as having a reference</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>          <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_allNodes</span><span class="p">[</span><span class="nv">$n</span><span class="o">-&gt;</span><span class="na">id</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">refKey</span> <span class="o">=</span>  <span class="nv">$ref</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span><span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$k</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$v</span><span class="p">))</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">preg_match</span><span class="p">(</span><span class="s1">&#39;/^&amp;([^ ]+)/&#39;</span><span class="p">,</span><span class="nv">$v</span><span class="p">,</span><span class="nv">$matches</span><span class="p">))</span> <span class="p">{</span></pre></div>            </td>
          </tr>
                  <tr id="section-99">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-99">&#182;</a>
              </div>
              <p>Flag the node so we know it's a reference</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>          <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_allNodes</span><span class="p">[</span><span class="nv">$n</span><span class="o">-&gt;</span><span class="na">id</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">ref</span> <span class="o">=</span> <span class="nb">substr</span><span class="p">(</span><span class="nv">$matches</span><span class="p">[</span><span class="m">0</span><span class="p">],</span><span class="m">1</span><span class="p">);</span>
          <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_allNodes</span><span class="p">[</span><span class="nv">$n</span><span class="o">-&gt;</span><span class="na">id</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">data</span><span class="p">[</span><span class="nv">$key</span><span class="p">][</span><span class="nv">$k</span><span class="p">]</span> <span class="o">=</span> 
                              <span class="nb">substr</span><span class="p">(</span><span class="nv">$v</span><span class="p">,</span><span class="nb">strlen</span><span class="p">(</span><span class="nv">$matches</span><span class="p">[</span><span class="m">0</span><span class="p">])</span><span class="o">+</span><span class="m">1</span><span class="p">);</span></pre></div>            </td>
          </tr>
                  <tr id="section-100">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-100">&#182;</a>
              </div>
              <p>Look forrefs</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>        <span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span><span class="nb">preg_match</span><span class="p">(</span><span class="s1">&#39;/^\*([^ ]+)/&#39;</span><span class="p">,</span><span class="nv">$v</span><span class="p">,</span><span class="nv">$matches</span><span class="p">))</span> <span class="p">{</span>
          <span class="nv">$ref</span> <span class="o">=</span> <span class="nb">substr</span><span class="p">(</span><span class="nv">$matches</span><span class="p">[</span><span class="m">0</span><span class="p">],</span><span class="m">1</span><span class="p">);</span></pre></div>            </td>
          </tr>
                  <tr id="section-101">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-101">&#182;</a>
              </div>
              <p>Flag the node as having a reference</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>          <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_allNodes</span><span class="p">[</span><span class="nv">$n</span><span class="o">-&gt;</span><span class="na">id</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">refKey</span> <span class="o">=</span>  <span class="nv">$ref</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span></pre></div>            </td>
          </tr>
                  <tr id="section-102">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-102">&#182;</a>
              </div>
              <p>Finds the children of a node and aids in the building of the PHP array
<em class='docparam'>@access</em> private
<em class='docparam'>@param</em> int $nid The id of the node whose children we're gathering
<em class='docparam'>@return</em> array</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>     <span class="k">private</span> <span class="k">function</span> <span class="nf">_gatherChildren</span><span class="p">(</span><span class="nv">$nid</span><span class="p">)</span> <span class="p">{</span>
      <span class="nv">$return</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
      <span class="nv">$node</span>   <span class="o">=&amp;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_allNodes</span><span class="p">[</span><span class="nv">$nid</span><span class="p">];</span>
      <span class="k">foreach</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_allNodes</span> <span class="k">as</span> <span class="nv">$z</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nv">$z</span><span class="o">-&gt;</span><span class="na">parent</span> <span class="o">==</span> <span class="nv">$node</span><span class="o">-&gt;</span><span class="na">id</span><span class="p">)</span> <span class="p">{</span></pre></div>            </td>
          </tr>
                  <tr id="section-103">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-103">&#182;</a>
              </div>
              <p>We found a child</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>          <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_nodeArrayizeData</span><span class="p">(</span><span class="nv">$z</span><span class="p">);</span></pre></div>            </td>
          </tr>
                  <tr id="section-104">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-104">&#182;</a>
              </div>
              <p>Check for references</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>          <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_makeReferences</span><span class="p">(</span><span class="nv">$z</span><span class="p">);</span></pre></div>            </td>
          </tr>
                  <tr id="section-105">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-105">&#182;</a>
              </div>
              <p>Merge with the big array we're returning</p>
            </td>
            <td class="code">
              <div class="highlight"><pre></pre></div>            </td>
          </tr>
                  <tr id="section-106">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-106">&#182;</a>
              </div>
              <p>The big array being all the data of the children of our parent node</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>          <span class="nv">$return</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_array_kmerge</span><span class="p">(</span><span class="nv">$return</span><span class="p">,</span><span class="nv">$z</span><span class="o">-&gt;</span><span class="na">data</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nv">$return</span><span class="p">;</span>
    <span class="p">}</span></pre></div>            </td>
          </tr>
                  <tr id="section-107">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-107">&#182;</a>
              </div>
              <p>Turns a node's data and its children's data into a PHP array</p>

<p><em class='docparam'>@access</em> private
<em class='docparam'>@param</em> array $node The node which you want to arrayize
<em class='docparam'>@return</em> boolean</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>     <span class="k">private</span> <span class="k">function</span> <span class="nf">_nodeArrayizeData</span><span class="p">(</span><span class="o">&amp;</span><span class="nv">$node</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nb">is_array</span><span class="p">(</span><span class="nv">$node</span><span class="o">-&gt;</span><span class="na">data</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nv">$node</span><span class="o">-&gt;</span><span class="na">children</span> <span class="o">==</span> <span class="k">true</span><span class="p">)</span> <span class="p">{</span></pre></div>            </td>
          </tr>
                  <tr id="section-108">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-108">&#182;</a>
              </div>
              <p>This node has children, so we need to find them</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>        <span class="nv">$childs</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_gatherChildren</span><span class="p">(</span><span class="nv">$node</span><span class="o">-&gt;</span><span class="na">id</span><span class="p">);</span></pre></div>            </td>
          </tr>
                  <tr id="section-109">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-109">&#182;</a>
              </div>
              <p>We've gathered all our children's data and are ready to use it</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>        <span class="nv">$key</span> <span class="o">=</span> <span class="nb">key</span><span class="p">(</span><span class="nv">$node</span><span class="o">-&gt;</span><span class="na">data</span><span class="p">);</span>
        <span class="nv">$key</span> <span class="o">=</span> <span class="k">empty</span><span class="p">(</span><span class="nv">$key</span><span class="p">)</span> <span class="o">?</span> <span class="m">0</span> <span class="o">:</span> <span class="nv">$key</span><span class="p">;</span></pre></div>            </td>
          </tr>
                  <tr id="section-110">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-110">&#182;</a>
              </div>
              <p>If it's an array, add to it of course</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>        <span class="k">if</span> <span class="p">(</span><span class="nb">is_array</span><span class="p">(</span><span class="nv">$node</span><span class="o">-&gt;</span><span class="na">data</span><span class="p">[</span><span class="nv">$key</span><span class="p">]))</span> <span class="p">{</span>
          <span class="nv">$node</span><span class="o">-&gt;</span><span class="na">data</span><span class="p">[</span><span class="nv">$key</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_array_kmerge</span><span class="p">(</span><span class="nv">$node</span><span class="o">-&gt;</span><span class="na">data</span><span class="p">[</span><span class="nv">$key</span><span class="p">],</span><span class="nv">$childs</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nv">$node</span><span class="o">-&gt;</span><span class="na">data</span><span class="p">[</span><span class="nv">$key</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$childs</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span><span class="o">!</span><span class="nb">is_array</span><span class="p">(</span><span class="nv">$node</span><span class="o">-&gt;</span><span class="na">data</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nv">$node</span><span class="o">-&gt;</span><span class="na">children</span> <span class="o">==</span> <span class="k">true</span><span class="p">)</span> <span class="p">{</span></pre></div>            </td>
          </tr>
                  <tr id="section-111">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-111">&#182;</a>
              </div>
              <p>Same as above, find the children of this node</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>        <span class="nv">$childs</span>       <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_gatherChildren</span><span class="p">(</span><span class="nv">$node</span><span class="o">-&gt;</span><span class="na">id</span><span class="p">);</span>
        <span class="nv">$node</span><span class="o">-&gt;</span><span class="na">data</span>   <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
        <span class="nv">$node</span><span class="o">-&gt;</span><span class="na">data</span><span class="p">[]</span> <span class="o">=</span> <span class="nv">$childs</span><span class="p">;</span>
      <span class="p">}</span></pre></div>            </td>
          </tr>
                  <tr id="section-112">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-112">&#182;</a>
              </div>
              <p>We edited $node by reference, so just return true</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>      <span class="k">return</span> <span class="k">true</span><span class="p">;</span>
    <span class="p">}</span></pre></div>            </td>
          </tr>
                  <tr id="section-113">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-113">&#182;</a>
              </div>
              <p>Traverses node-space and copies references to / from this object.
<em class='docparam'>@access</em> private
<em class='docparam'>@param</em> object $z A node whose references we wish to make real
<em class='docparam'>@return</em> bool</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>     <span class="k">private</span> <span class="k">function</span> <span class="nf">_makeReferences</span><span class="p">(</span><span class="o">&amp;</span><span class="nv">$z</span><span class="p">)</span> <span class="p">{</span></pre></div>            </td>
          </tr>
                  <tr id="section-114">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-114">&#182;</a>
              </div>
              <p>It is a reference</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>      <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$z</span><span class="o">-&gt;</span><span class="na">ref</span><span class="p">))</span> <span class="p">{</span>
        <span class="nv">$key</span>                <span class="o">=</span> <span class="nb">key</span><span class="p">(</span><span class="nv">$z</span><span class="o">-&gt;</span><span class="na">data</span><span class="p">);</span></pre></div>            </td>
          </tr>
                  <tr id="section-115">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-115">&#182;</a>
              </div>
              <p>Copy the data to this object for easy retrieval later</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">ref</span><span class="p">[</span><span class="nv">$z</span><span class="o">-&gt;</span><span class="na">ref</span><span class="p">]</span> <span class="o">=&amp;</span> <span class="nv">$z</span><span class="o">-&gt;</span><span class="na">data</span><span class="p">[</span><span class="nv">$key</span><span class="p">];</span></pre></div>            </td>
          </tr>
                  <tr id="section-116">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-116">&#182;</a>
              </div>
              <p>It has a reference</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>      <span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$z</span><span class="o">-&gt;</span><span class="na">refKey</span><span class="p">))</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">ref</span><span class="p">[</span><span class="nv">$z</span><span class="o">-&gt;</span><span class="na">refKey</span><span class="p">]))</span> <span class="p">{</span>
          <span class="nv">$key</span>           <span class="o">=</span> <span class="nb">key</span><span class="p">(</span><span class="nv">$z</span><span class="o">-&gt;</span><span class="na">data</span><span class="p">);</span></pre></div>            </td>
          </tr>
                  <tr id="section-117">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-117">&#182;</a>
              </div>
              <p>Copy the data from this object to make the node a real reference</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>          <span class="nv">$z</span><span class="o">-&gt;</span><span class="na">data</span><span class="p">[</span><span class="nv">$key</span><span class="p">]</span> <span class="o">=&amp;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">ref</span><span class="p">[</span><span class="nv">$z</span><span class="o">-&gt;</span><span class="na">refKey</span><span class="p">];</span>
        <span class="p">}</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="k">true</span><span class="p">;</span>
    <span class="p">}</span></pre></div>            </td>
          </tr>
                  <tr id="section-118">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-118">&#182;</a>
              </div>
              <p>Merges arrays and maintains numeric keys.</p>

<p>An ever-so-slightly modified version of the array_kmerge() function posted
 to php.net by mail at nospam dot iaindooley dot com on 2004-04-08.</p>

<p>http:us3.php.net/manual/en/function.array-merge.php#41394</p>

<p><em class='docparam'>@access</em> private
<em class='docparam'>@param</em> array $arr1
<em class='docparam'>@param</em> array $arr2
<em class='docparam'>@return</em> array</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>     <span class="k">private</span> <span class="k">function</span> <span class="nf">_array_kmerge</span><span class="p">(</span><span class="nv">$arr1</span><span class="p">,</span><span class="nv">$arr2</span><span class="p">)</span> <span class="p">{</span> 
      <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nb">is_array</span><span class="p">(</span><span class="nv">$arr1</span><span class="p">))</span> 
        <span class="nv">$arr1</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span> 

      <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nb">is_array</span><span class="p">(</span><span class="nv">$arr2</span><span class="p">))</span>
        <span class="nv">$arr2</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span> 
    
      <span class="nv">$keys1</span> <span class="o">=</span> <span class="nb">array_keys</span><span class="p">(</span><span class="nv">$arr1</span><span class="p">);</span> 
      <span class="nv">$keys2</span> <span class="o">=</span> <span class="nb">array_keys</span><span class="p">(</span><span class="nv">$arr2</span><span class="p">);</span> 
      <span class="nv">$keys</span>  <span class="o">=</span> <span class="nb">array_merge</span><span class="p">(</span><span class="nv">$keys1</span><span class="p">,</span><span class="nv">$keys2</span><span class="p">);</span> 
      <span class="nv">$vals1</span> <span class="o">=</span> <span class="nb">array_values</span><span class="p">(</span><span class="nv">$arr1</span><span class="p">);</span> 
      <span class="nv">$vals2</span> <span class="o">=</span> <span class="nb">array_values</span><span class="p">(</span><span class="nv">$arr2</span><span class="p">);</span> 
      <span class="nv">$vals</span>  <span class="o">=</span> <span class="nb">array_merge</span><span class="p">(</span><span class="nv">$vals1</span><span class="p">,</span><span class="nv">$vals2</span><span class="p">);</span> 
      <span class="nv">$ret</span>   <span class="o">=</span> <span class="k">array</span><span class="p">();</span> 

      <span class="k">foreach</span><span class="p">(</span><span class="nv">$keys</span> <span class="k">as</span> <span class="nv">$key</span><span class="p">)</span> <span class="p">{</span> 
        <span class="k">list</span><span class="p">(</span><span class="nv">$unused</span><span class="p">,</span><span class="nv">$val</span><span class="p">)</span> <span class="o">=</span> <span class="nb">each</span><span class="p">(</span><span class="nv">$vals</span><span class="p">);</span></pre></div>            </td>
          </tr>
                  <tr id="section-119">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-119">&#182;</a>
              </div>
              <p>This is the good part!  If a key already exists, but it's part of a</p>
            </td>
            <td class="code">
              <div class="highlight"><pre></pre></div>            </td>
          </tr>
                  <tr id="section-120">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-120">&#182;</a>
              </div>
              <p>sequence (an int), just keep addin numbers until we find a fresh one.</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>        <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$ret</span><span class="p">[</span><span class="nv">$key</span><span class="p">])</span> <span class="k">and</span> <span class="nb">is_int</span><span class="p">(</span><span class="nv">$key</span><span class="p">))</span> <span class="p">{</span>
          <span class="k">while</span> <span class="p">(</span><span class="nb">array_key_exists</span><span class="p">(</span><span class="nv">$key</span><span class="p">,</span> <span class="nv">$ret</span><span class="p">))</span> <span class="p">{</span>
            <span class="nv">$key</span><span class="o">++</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>  
        <span class="nv">$ret</span><span class="p">[</span><span class="nv">$key</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$val</span><span class="p">;</span> 
      <span class="p">}</span> 

      <span class="k">return</span> <span class="nv">$ret</span><span class="p">;</span> 
    <span class="p">}</span>
  <span class="p">}</span>
<span class="cp">?&gt;</span><span class="x"></span>
</pre></div></pre></div>            </td>
          </tr>
              </tbody>
    </table>
  </div>
</body>
</html>
