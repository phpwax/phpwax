<!DOCTYPE html>

<html>
<head>
  <title>WaxTemplate.php</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="layout.css" />
  <style>
    /*--------------------- Layout and Typography ----------------------------*/
body {
  font-family: 'Palatino Linotype', 'Book Antiqua', Palatino, FreeSerif, serif;
  font-size: 15px;
  line-height: 22px;
  color: #252519;
  margin: 0; padding: 0;
}
a {
  color: #261a3b;
}
  a:visited {
    color: #261a3b;
  }
p {
  margin: 0 0 15px 0;
}
h1, h2, h3, h4, h5, h6 {
  margin: 40px 0 15px 0;
}
  h3, h4, h5, h6 {
    margin-top: 20px;
  }
#container {
  position: relative;
}
#background {
  position: fixed;
  top: 0; left: 575px; right: 0; bottom: 0;
  background: #f5f5ff;
  border-left: 1px solid #e5e5ee;
  z-index: -1;
}
#jump_to, #jump_page {
  background: white;
  -webkit-box-shadow: 0 0 25px #777; -moz-box-shadow: 0 0 25px #777;
  -webkit-border-bottom-left-radius: 5px; -moz-border-radius-bottomleft: 5px;
  font: 10px Arial;
  text-transform: uppercase;
  cursor: pointer;
  text-align: right;
}
#jump_to, #jump_wrapper {
  position: fixed;
  right: 0; top: 0;
  padding: 5px 10px;
}
  #jump_wrapper {
    padding: 0;
    display: none;
  }
    #jump_to:hover #jump_wrapper {
      display: block;
    }
    #jump_page {
      padding: 5px 0 3px;
      margin: 0 0 25px 25px;
      overflow:hidden;
    }
      #jump_page .source {
        display: block;
        padding: 5px 10px;
        text-decoration: none;
        border-top: 1px solid #eee;
        float:left;
        min-width:180px;
        text-align:left;
        text-transform:none;
        font-size:11px;
      }
        #jump_page .source:hover {
          background: #f5f5ff;
        }
        #jump_page .source:first-child {
        }
table td {
  border: 0;
  outline: 0;
}
  td.docs, th.docs {
    max-width: 450px;
    min-width: 450px;
    min-height: 5px;
    padding: 10px 25px 1px 50px;
    overflow-x: hidden;
    vertical-align: top;
    text-align: left;
  }
    .docs pre {
      margin: 15px 0 15px;
      padding-left: 15px;
    }
    .docs p tt, .docs p code {
      background: #f8f8ff;
      border: 1px solid #dedede;
      font-size: 12px;
      padding: 0 0.2em;
    }
    .pilwrap {
      position: relative;
    }
      .pilcrow {
        font: 12px Arial;
        text-decoration: none;
        color: #454545;
        position: absolute;
        top: 3px; left: -20px;
        padding: 1px 2px;
        opacity: 0;
        -webkit-transition: opacity 0.2s linear;
      }
        td.docs:hover .pilcrow {
          opacity: 1;
        }
  td.code, th.code {
    padding: 14px 15px 16px 25px;
    width: 100%;
    vertical-align: top;
    background: #f5f5ff;
    border-left: 1px solid #e5e5ee;
  }
    pre, tt, code {
      font-size: 12px; line-height: 18px;
      font-family: Monaco, Consolas, "Lucida Console", monospace;
      margin: 0; padding: 0;
    }


/*---------------------- Syntax Highlighting -----------------------------*/
td.linenos { background-color: #f0f0f0; padding-right: 10px; }
span.lineno { background-color: #f0f0f0; padding: 0 5px 0 5px; }
body .hll { background-color: #ffffcc }
body .c { color: #408080; font-style: italic }  /* Comment */
body .err { border: 1px solid #FF0000 }         /* Error */
body .k { color: #954121 }                      /* Keyword */
body .o { color: #666666 }                      /* Operator */
body .cm { color: #408080; font-style: italic } /* Comment.Multiline */
body .cp { color: #BC7A00 }                     /* Comment.Preproc */
body .c1 { color: #408080; font-style: italic } /* Comment.Single */
body .cs { color: #408080; font-style: italic } /* Comment.Special */
body .gd { color: #A00000 }                     /* Generic.Deleted */
body .ge { font-style: italic }                 /* Generic.Emph */
body .gr { color: #FF0000 }                     /* Generic.Error */
body .gh { color: #000080; font-weight: bold }  /* Generic.Heading */
body .gi { color: #00A000 }                     /* Generic.Inserted */
body .go { color: #808080 }                     /* Generic.Output */
body .gp { color: #000080; font-weight: bold }  /* Generic.Prompt */
body .gs { font-weight: bold }                  /* Generic.Strong */
body .gu { color: #800080; font-weight: bold }  /* Generic.Subheading */
body .gt { color: #0040D0 }                     /* Generic.Traceback */
body .kc { color: #954121 }                     /* Keyword.Constant */
body .kd { color: #954121; font-weight: bold }  /* Keyword.Declaration */
body .kn { color: #954121; font-weight: bold }  /* Keyword.Namespace */
body .kp { color: #954121 }                     /* Keyword.Pseudo */
body .kr { color: #954121; font-weight: bold }  /* Keyword.Reserved */
body .kt { color: #B00040 }                     /* Keyword.Type */
body .m { color: #666666 }                      /* Literal.Number */
body .s { color: #219161 }                      /* Literal.String */
body .na { color: #7D9029 }                     /* Name.Attribute */
body .nb { color: #954121 }                     /* Name.Builtin */
body .nc { color: #0000FF; font-weight: bold }  /* Name.Class */
body .no { color: #880000 }                     /* Name.Constant */
body .nd { color: #AA22FF }                     /* Name.Decorator */
body .ni { color: #999999; font-weight: bold }  /* Name.Entity */
body .ne { color: #D2413A; font-weight: bold }  /* Name.Exception */
body .nf { color: #0000FF }                     /* Name.Function */
body .nl { color: #A0A000 }                     /* Name.Label */
body .nn { color: #0000FF; font-weight: bold }  /* Name.Namespace */
body .nt { color: #954121; font-weight: bold }  /* Name.Tag */
body .nv { color: #19469D }                     /* Name.Variable */
body .ow { color: #AA22FF; font-weight: bold }  /* Operator.Word */
body .w { color: #bbbbbb }                      /* Text.Whitespace */
body .mf { color: #666666 }                     /* Literal.Number.Float */
body .mh { color: #666666 }                     /* Literal.Number.Hex */
body .mi { color: #666666 }                     /* Literal.Number.Integer */
body .mo { color: #666666 }                     /* Literal.Number.Oct */
body .sb { color: #219161 }                     /* Literal.String.Backtick */
body .sc { color: #219161 }                     /* Literal.String.Char */
body .sd { color: #219161; font-style: italic } /* Literal.String.Doc */
body .s2 { color: #219161 }                     /* Literal.String.Double */
body .se { color: #BB6622; font-weight: bold }  /* Literal.String.Escape */
body .sh { color: #219161 }                     /* Literal.String.Heredoc */
body .si { color: #BB6688; font-weight: bold }  /* Literal.String.Interpol */
body .sx { color: #954121 }                     /* Literal.String.Other */
body .sr { color: #BB6688 }                     /* Literal.String.Regex */
body .s1 { color: #219161 }                     /* Literal.String.Single */
body .ss { color: #19469D }                     /* Literal.String.Symbol */
body .bp { color: #954121 }                     /* Name.Builtin.Pseudo */
body .vc { color: #19469D }                     /* Name.Variable.Class */
body .vg { color: #19469D }                     /* Name.Variable.Global */
body .vi { color: #19469D }                     /* Name.Variable.Instance */
body .il { color: #666666 }                     /* Literal.Number.Integer.Long */


/********** PHP Comment Additions ********/
td.docs .docparam {color:#DB251A;font-weight:bold;}  </style>
</head>
<body>
  <div id="container">
    <div id="background"></div>
          <div id="jump_to">
        Jump To &hellip;
        <div id="jump_wrapper">
          <div id="jump_page">
                                        <a class="source" href="../auth/WaxAuthDb.html">
                              WaxAuthDb.php              </a>
                                        <a class="source" href="..//AutoLoader.html">
                              AutoLoader.php              </a>
                                        <a class="source" href="../cache/engines/WaxCacheBackgroundFile.html">
                              WaxCacheBackgroundFile.php              </a>
                                        <a class="source" href="../cache/engines/WaxCacheBackgroundMemcache.html">
                              WaxCacheBackgroundMemcache.php              </a>
                                        <a class="source" href="../cache/engines/WaxCacheFile.html">
                              WaxCacheFile.php              </a>
                                        <a class="source" href="../cache/engines/WaxCacheFilesystem.html">
                              WaxCacheFilesystem.php              </a>
                                        <a class="source" href="../cache/engines/WaxCacheImage.html">
                              WaxCacheImage.php              </a>
                                        <a class="source" href="../cache/engines/WaxCacheMemcache.html">
                              WaxCacheMemcache.php              </a>
                                        <a class="source" href="../cache/engines/WaxCacheMemory.html">
                              WaxCacheMemory.php              </a>
                                        <a class="source" href="../cache/engines/WaxRegenFileCache.html">
                              WaxRegenFileCache.php              </a>
                                        <a class="source" href="../cache/engines/WaxRegenMemcacheCache.html">
                              WaxRegenMemcacheCache.php              </a>
                                        <a class="source" href="../cache/WaxCache.html">
                              WaxCache.php              </a>
                                        <a class="source" href="../cache/WaxCacheHelper.html">
                              WaxCacheHelper.php              </a>
                                        <a class="source" href="../cache/WaxCacheLoader.html">
                              WaxCacheLoader.php              </a>
                                        <a class="source" href="../core/WaxApplication.html">
                              WaxApplication.php              </a>
                                        <a class="source" href="../core/WaxEvent.html">
                              WaxEvent.php              </a>
                                        <a class="source" href="../db/adapters/WaxMysqlAdapter.html">
                              WaxMysqlAdapter.php              </a>
                                        <a class="source" href="../db/adapters/WaxSqliteAdapter.html">
                              WaxSqliteAdapter.php              </a>
                                        <a class="source" href="../db/fields/AutoField.html">
                              AutoField.php              </a>
                                        <a class="source" href="../db/fields/BooleanField.html">
                              BooleanField.php              </a>
                                        <a class="source" href="../db/fields/CharField.html">
                              CharField.php              </a>
                                        <a class="source" href="../db/fields/DateTimeField.html">
                              DateTimeField.php              </a>
                                        <a class="source" href="../db/fields/EmailField.html">
                              EmailField.php              </a>
                                        <a class="source" href="../db/fields/FileField.html">
                              FileField.php              </a>
                                        <a class="source" href="../db/fields/FloatField.html">
                              FloatField.php              </a>
                                        <a class="source" href="../db/fields/ForeignKey.html">
                              ForeignKey.php              </a>
                                        <a class="source" href="../db/fields/HasManyField.html">
                              HasManyField.php              </a>
                                        <a class="source" href="../db/fields/IntegerField.html">
                              IntegerField.php              </a>
                                        <a class="source" href="../db/fields/ManyToManyField.html">
                              ManyToManyField.php              </a>
                                        <a class="source" href="../db/fields/PasswordField.html">
                              PasswordField.php              </a>
                                        <a class="source" href="../db/fields/TextField.html">
                              TextField.php              </a>
                                        <a class="source" href="../db/WaxDbAdapter.html">
                              WaxDbAdapter.php              </a>
                                        <a class="source" href="../db/WaxModel.html">
                              WaxModel.php              </a>
                                        <a class="source" href="../db/WaxModelAssociation.html">
                              WaxModelAssociation.php              </a>
                                        <a class="source" href="../db/WaxModelField.html">
                              WaxModelField.php              </a>
                                        <a class="source" href="../db/WaxModelJoin.html">
                              WaxModelJoin.php              </a>
                                        <a class="source" href="../db/WaxModelOrderedJoin.html">
                              WaxModelOrderedJoin.php              </a>
                                        <a class="source" href="../db/WaxPaginatedRecordset.html">
                              WaxPaginatedRecordset.php              </a>
                                        <a class="source" href="../db/WaxRecordset.html">
                              WaxRecordset.php              </a>
                                        <a class="source" href="../db/WaxTreeModel.html">
                              WaxTreeModel.php              </a>
                                        <a class="source" href="../db/WaxTreeRecordset.html">
                              WaxTreeRecordset.php              </a>
                                        <a class="source" href="../dispatch/WaxController.html">
                              WaxController.php              </a>
                                        <a class="source" href="../dispatch/WaxResponse.html">
                              WaxResponse.php              </a>
                                        <a class="source" href="../dispatch/WaxUrl.html">
                              WaxUrl.php              </a>
                                        <a class="source" href="../exceptions/MaintenanceException.html">
                              MaintenanceException.php              </a>
                                        <a class="source" href="../exceptions/WaxDbException.html">
                              WaxDbException.php              </a>
                                        <a class="source" href="../exceptions/WaxDBStructureException.html">
                              WaxDBStructureException.php              </a>
                                        <a class="source" href="../exceptions/WaxDependencyException.html">
                              WaxDependencyException.php              </a>
                                        <a class="source" href="../exceptions/WaxEmailException.html">
                              WaxEmailException.php              </a>
                                        <a class="source" href="../exceptions/WaxException.html">
                              WaxException.php              </a>
                                        <a class="source" href="../exceptions/WaxPermissionsException.html">
                              WaxPermissionsException.php              </a>
                                        <a class="source" href="../exceptions/WaxSqlException.html">
                              WaxSqlException.php              </a>
                                        <a class="source" href="../exceptions/WaxUserException.html">
                              WaxUserException.php              </a>
                                        <a class="source" href="../exceptions/WXException.html">
                              WXException.php              </a>
                                        <a class="source" href="../exceptions/WXRoutingException.html">
                              WXRoutingException.php              </a>
                                        <a class="source" href="../forms/WaxBoundForm.html">
                              WaxBoundForm.php              </a>
                                        <a class="source" href="../forms/WaxForm.html">
                              WaxForm.php              </a>
                                        <a class="source" href="../forms/WaxRecordsetForm.html">
                              WaxRecordsetForm.php              </a>
                                        <a class="source" href="../forms/WaxUnboundForm.html">
                              WaxUnboundForm.php              </a>
                                        <a class="source" href="../forms/WaxValidate.html">
                              WaxValidate.php              </a>
                                        <a class="source" href="../forms/WaxWidget.html">
                              WaxWidget.php              </a>
                                        <a class="source" href="../forms/widgets/CheckboxInput.html">
                              CheckboxInput.php              </a>
                                        <a class="source" href="../forms/widgets/CountrySelectInput.html">
                              CountrySelectInput.php              </a>
                                        <a class="source" href="../forms/widgets/DateInput.html">
                              DateInput.php              </a>
                                        <a class="source" href="../forms/widgets/DateSelectInput.html">
                              DateSelectInput.php              </a>
                                        <a class="source" href="../forms/widgets/FileInput.html">
                              FileInput.php              </a>
                                        <a class="source" href="../forms/widgets/HiddenInput.html">
                              HiddenInput.php              </a>
                                        <a class="source" href="../forms/widgets/ImageSubmitInput.html">
                              ImageSubmitInput.php              </a>
                                        <a class="source" href="../forms/widgets/MultipleSelectInput.html">
                              MultipleSelectInput.php              </a>
                                        <a class="source" href="../forms/widgets/PasswordInput.html">
                              PasswordInput.php              </a>
                                        <a class="source" href="../forms/widgets/SelectInput.html">
                              SelectInput.php              </a>
                                        <a class="source" href="../forms/widgets/SubmitInput.html">
                              SubmitInput.php              </a>
                                        <a class="source" href="../forms/widgets/TextareaInput.html">
                              TextareaInput.php              </a>
                                        <a class="source" href="../forms/widgets/TextInput.html">
                              TextInput.php              </a>
                                        <a class="source" href="../helpers/AssetTagHelper.html">
                              AssetTagHelper.php              </a>
                                        <a class="source" href="../helpers/deprecated/FormBuilderHelper.html">
                              FormBuilderHelper.php              </a>
                                        <a class="source" href="../helpers/deprecated/FormHelper.html">
                              FormHelper.php              </a>
                                        <a class="source" href="../helpers/deprecated/FormOptionsHelper.html">
                              FormOptionsHelper.php              </a>
                                        <a class="source" href="../helpers/deprecated/FormTagHelper.html">
                              FormTagHelper.php              </a>
                                        <a class="source" href="../helpers/RequestHelper.html">
                              RequestHelper.php              </a>
                                        <a class="source" href="../helpers/UrlHelper.html">
                              UrlHelper.php              </a>
                                        <a class="source" href="../helpers/WXHelpers.html">
                              WXHelpers.php              </a>
                                        <a class="source" href="../interfaces/Cacheable.html">
                              Cacheable.php              </a>
                                        <a class="source" href="../interfaces/CacheEngine.html">
                              CacheEngine.php              </a>
                                        <a class="source" href="..//make.html">
                              make.php              </a>
                                        <a class="source" href="../template/WaxPartial.html">
                              WaxPartial.php              </a>
                                        <a class="source" href="../template/WaxPartialHelper.html">
                              WaxPartialHelper.php              </a>
                                        <a class="source" href="../template/WaxTemplate.html">
                              WaxTemplate.php              </a>
                                        <a class="source" href="../testing/WXTestCase.html">
                              WXTestCase.php              </a>
                                        <a class="source" href="../testing/WXWebTestCase.html">
                              WXWebTestCase.php              </a>
                                        <a class="source" href="../tests/TestConfig.html">
                              TestConfig.php              </a>
                                        <a class="source" href="../tests/TestInflections.html">
                              TestInflections.php              </a>
                                        <a class="source" href="../tests/TestPaginatedRecordset.html">
                              TestPaginatedRecordset.php              </a>
                                        <a class="source" href="../tests/TestRequest.html">
                              TestRequest.php              </a>
                                        <a class="source" href="../tests/TestWaxAuthDb.html">
                              TestWaxAuthDb.php              </a>
                                        <a class="source" href="../tests/TestWaxController.html">
                              TestWaxController.php              </a>
                                        <a class="source" href="../tests/TestWaxModel.html">
                              TestWaxModel.php              </a>
                                        <a class="source" href="../tests/TestWaxModelField.html">
                              TestWaxModelField.php              </a>
                                        <a class="source" href="../tests/TestWaxTreeModel.html">
                              TestWaxTreeModel.php              </a>
                                        <a class="source" href="../tests/TestWaxUrl.html">
                              TestWaxUrl.php              </a>
                                        <a class="source" href="../tests/TestWXEmail.html">
                              TestWXEmail.php              </a>
                                        <a class="source" href="../utilities/Config.html">
                              Config.php              </a>
                                        <a class="source" href="../utilities/deprecated/WXEmail.html">
                              WXEmail.php              </a>
                                        <a class="source" href="../utilities/deprecated/WXScripts.html">
                              WXScripts.php              </a>
                                        <a class="source" href="../utilities/File.html">
                              File.php              </a>
                                        <a class="source" href="../utilities/Inflections.html">
                              Inflections.php              </a>
                                        <a class="source" href="../utilities/Profiler.html">
                              Profiler.php              </a>
                                        <a class="source" href="../utilities/Request.html">
                              Request.php              </a>
                                        <a class="source" href="../utilities/Session.html">
                              Session.php              </a>
                                        <a class="source" href="../utilities/Spyc.html">
                              Spyc.php              </a>
                                        <a class="source" href="../utilities/WaxCLI.html">
                              WaxCLI.php              </a>
                                        <a class="source" href="../utilities/WaxCodeGenerator.html">
                              WaxCodeGenerator.php              </a>
                                        <a class="source" href="../utilities/WaxEmail.html">
                              WaxEmail.php              </a>
                                        <a class="source" href="../utilities/WaxLog.html">
                              WaxLog.php              </a>
                      </div>
        </div>
      </div>
        <table cellpadding="0" cellspacing="0">
      <thead>
        <tr>
          <th class="docs">
            <h1>
              WaxTemplate.php            </h1>
          </th>
          <th class="code">
          </th>
        </tr>
      </thead>
      <tbody>
                  <tr id="section-0">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-0">&#182;</a>
              </div>
              <p><em class='docparam'>@package</em> PHP-Wax
<em class='docparam'>@author</em> Ross Riley</p>
            </td>
            <td class="code">
              <div class="highlight"><pre><span class="k">class</span> <span class="nc">WaxTemplate</span> <span class="k">implements</span> <span class="nx">Cacheable</span><span class="p">{</span></pre></div>            </td>
          </tr>
                  <tr id="section-1">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              <p>interface vars </p>
            </td>
            <td class="code">
              <div class="highlight"><pre>  <span class="k">public</span> <span class="nv">$use_cache</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>
  <span class="k">public</span> <span class="k">static</span> <span class="nv">$mime_types</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s2">&quot;json&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;text/javascript&quot;</span><span class="p">,</span> <span class="s1">&#39;js&#39;</span><span class="o">=&gt;</span> <span class="s1">&#39;text/javascript&#39;</span><span class="p">,</span> <span class="s1">&#39;xml&#39;</span><span class="o">=&gt;</span><span class="s1">&#39;application/xml&#39;</span><span class="p">);</span>
    
  
 <span class="k">public</span> <span class="k">static</span> <span class="nv">$response_filters</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
     <span class="s1">&#39;views&#39;</span><span class="o">=&gt;</span>  <span class="k">array</span><span class="p">(</span><span class="s1">&#39;default&#39;</span><span class="o">=&gt;</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;model&#39;</span><span class="o">=&gt;</span><span class="s1">&#39;self&#39;</span><span class="p">,</span> <span class="s1">&#39;method&#39;</span><span class="o">=&gt;</span><span class="s1">&#39;render_view_response_filter&#39;</span><span class="p">)),</span>
    <span class="s1">&#39;layout&#39;</span><span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;default&#39;</span><span class="o">=&gt;</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;model&#39;</span><span class="o">=&gt;</span><span class="s1">&#39;self&#39;</span><span class="p">,</span> <span class="s1">&#39;method&#39;</span><span class="o">=&gt;</span><span class="s1">&#39;render_layout_response_filter&#39;</span><span class="p">)),</span>
    <span class="s1">&#39;partial&#39;</span><span class="o">=&gt;</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;default&#39;</span><span class="o">=&gt;</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;model&#39;</span><span class="o">=&gt;</span><span class="s1">&#39;self&#39;</span><span class="p">,</span> <span class="s1">&#39;method&#39;</span><span class="o">=&gt;</span><span class="s1">&#39;render_partial_response_filter&#39;</span><span class="p">))</span>
   <span class="p">);</span>

 <span class="k">public</span> <span class="nv">$template_paths</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
 
 
 <span class="k">public</span> <span class="k">function</span> <span class="nf">__construct</span><span class="p">(</span><span class="nv">$values</span> <span class="o">=</span> <span class="k">array</span><span class="p">())</span> <span class="p">{</span>
    <span class="k">foreach</span><span class="p">(</span><span class="nv">$values</span> <span class="k">as</span> <span class="nv">$var</span><span class="o">=&gt;</span><span class="nv">$val</span><span class="p">)</span> <span class="p">{</span>
      <span class="nv">$this</span><span class="o">-&gt;</span><span class="p">{</span><span class="nv">$var</span><span class="p">}</span><span class="o">=</span><span class="nv">$val</span><span class="p">;</span>
    <span class="p">}</span>
 <span class="p">}</span>
 
 

 <span class="k">public</span> <span class="k">function</span> <span class="nf">add_path</span><span class="p">(</span><span class="nv">$path</span><span class="p">)</span> <span class="p">{</span>
   <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">template_paths</span><span class="p">[]</span><span class="o">=</span><span class="nv">$path</span><span class="p">;</span>
 <span class="p">}</span></pre></div>            </td>
          </tr>
                  <tr id="section-2">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>Ok, this little beauty runs over config array of replace regexs
 and uses the available<em>domains list to allow certain src files
 to come from an alternative domain in order to improve concurrent
 downloads in the browser
<em class='docparam'>@param</em> string $buffer</em>string 
<em class='docparam'>@param</em> string $randomise_config 
<em class='docparam'>@return</em> void</p>
            </td>
            <td class="code">
              <div class="highlight"><pre> <span class="k">private</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">randomise_source_domains</span><span class="p">(</span><span class="nv">$buffer_string</span><span class="p">,</span> <span class="nv">$randomise_config</span><span class="p">){</span>
   <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nb">is_array</span><span class="p">(</span><span class="nv">$randomise_config</span><span class="p">)</span> <span class="o">||</span> <span class="o">!</span><span class="nv">$randomise_config</span> 
     <span class="o">||</span> <span class="o">!</span><span class="nb">count</span><span class="p">(</span><span class="nv">$randomise_config</span><span class="p">[</span><span class="s1">&#39;available_domains&#39;</span><span class="p">])</span> <span class="o">||</span> <span class="o">!</span><span class="nb">count</span><span class="p">(</span><span class="nv">$randomise_config</span><span class="p">[</span><span class="s1">&#39;replace&#39;</span><span class="p">]))</span> <span class="k">return</span> <span class="nv">$buffer_string</span><span class="p">;</span></pre></div>            </td>
          </tr>
                  <tr id="section-3">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>check exclusions</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>   <span class="k">if</span><span class="p">(</span><span class="nv">$randomise_config</span> <span class="o">&amp;&amp;</span> <span class="nb">is_array</span><span class="p">(</span><span class="nv">$randomise_config</span><span class="p">[</span><span class="s1">&#39;exclusions&#39;</span><span class="p">])){</span>
     <span class="k">foreach</span><span class="p">(</span><span class="nv">$randomise_config</span><span class="p">[</span><span class="s1">&#39;exclusions&#39;</span><span class="p">]</span> <span class="k">as</span> <span class="nv">$name</span> <span class="o">=&gt;</span> <span class="nv">$regex</span><span class="p">){</span>
       <span class="nb">preg_match_all</span><span class="p">(</span><span class="nv">$regex</span><span class="p">,</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;REQUEST_URI&#39;</span><span class="p">],</span> <span class="nv">$matches</span><span class="p">);</span>       
       <span class="k">if</span><span class="p">(</span><span class="nb">count</span><span class="p">(</span><span class="nv">$matches</span><span class="p">[</span><span class="m">0</span><span class="p">]))</span> <span class="k">return</span> <span class="nv">$buffer_string</span><span class="p">;</span>
     <span class="p">}</span>
   <span class="p">}</span>
   <span class="nv">$domains</span> <span class="o">=</span> <span class="nv">$randomise_config</span><span class="p">[</span><span class="s1">&#39;available_domains&#39;</span><span class="p">];</span>
   <span class="nv">$patterns</span> <span class="o">=</span> <span class="nv">$randomise_config</span><span class="p">[</span><span class="s1">&#39;replace&#39;</span><span class="p">];</span>
   <span class="k">foreach</span><span class="p">(</span><span class="nv">$patterns</span> <span class="k">as</span> <span class="nv">$pattern</span><span class="p">)</span> <span class="nv">$buffer_string</span> <span class="o">=</span> <span class="nx">self</span><span class="o">::</span><span class="na">replace_source_domains</span><span class="p">(</span><span class="nv">$buffer_string</span><span class="p">,</span> <span class="nv">$pattern</span><span class="p">,</span> <span class="nv">$domains</span><span class="p">);</span>
    <span class="k">return</span> <span class="nv">$buffer_string</span><span class="p">;</span>
 <span class="p">}</span></pre></div>            </td>
          </tr>
                  <tr id="section-4">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>use the regex passed in to replace the content of the buffer<em>string with the new 
 source domains
<em class='docparam'>@param</em> string $buffer</em>string 
<em class='docparam'>@param</em> string $pattern 
<em class='docparam'>@param</em> string $domains 
<em class='docparam'>@return</em> void</p>
            </td>
            <td class="code">
              <div class="highlight"><pre> <span class="k">private</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">replace_source_domains</span><span class="p">(</span><span class="nv">$buffer_string</span><span class="p">,</span> <span class="nv">$pattern</span><span class="p">,</span> <span class="nv">$domains</span><span class="p">){</span>
   <span class="k">if</span><span class="p">(</span><span class="nv">$pattern_position</span> <span class="o">&gt;</span> <span class="nb">count</span><span class="p">(</span><span class="nv">$patterns</span><span class="p">))</span> <span class="k">return</span> <span class="nv">$buffer_string</span><span class="p">;</span>
   <span class="nv">$modified_string</span> <span class="o">=</span> <span class="nv">$buffer_string</span><span class="p">;</span>
    <span class="nb">preg_match_all</span><span class="p">(</span><span class="nv">$pattern</span><span class="p">,</span> <span class="nv">$modified_string</span><span class="p">,</span> <span class="nv">$matches</span><span class="p">,</span>  <span class="nx">PREG_SET_ORDER</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="nb">count</span><span class="p">(</span><span class="nv">$matches</span><span class="p">)){</span>
      <span class="nv">$domain_count</span> <span class="o">=</span> <span class="m">0</span><span class="p">;</span>
      <span class="k">foreach</span><span class="p">(</span><span class="nv">$matches</span> <span class="k">as</span> <span class="nv">$match</span><span class="p">){</span>
        <span class="nv">$original</span> <span class="o">=</span> <span class="nv">$match</span><span class="p">[</span><span class="m">0</span><span class="p">];</span>
        <span class="nv">$str</span> <span class="o">=</span> <span class="p">(</span><span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;https&#39;</span><span class="p">])</span> <span class="o">?</span> <span class="s2">&quot;https:</span>
<span class="s2">//CODEBLOCK</span>

<span class="s2">        </span><span class="si">$str</span><span class="s2"> .= </span><span class="si">$domains[$domain_count]</span><span class="s2">;</span>
<span class="s2">        </span><span class="si">$new</span><span class="s2"> = str_ireplace(</span><span class="si">$match[1]</span><span class="s2">, </span><span class="si">$str</span><span class="s2">.</span><span class="si">$match[1]</span><span class="s2">, </span><span class="si">$original</span><span class="s2">);</span>
<span class="s2">        </span><span class="si">$modified_string</span><span class="s2"> = str_ireplace(</span><span class="si">$original</span><span class="s2">, </span><span class="si">$new</span><span class="s2">, </span><span class="si">$modified_string</span><span class="s2">);</span>
<span class="s2">        </span><span class="si">$domain_count</span><span class="s2">++;</span>
<span class="s2">        if(</span><span class="si">$domain_count</span><span class="s2"> &gt;= count(</span><span class="si">$domains</span><span class="s2">)) </span><span class="si">$domain_count</span><span class="s2"> = 0;</span>
<span class="s2">      }</span>
<span class="s2">    }</span>
<span class="s2">    return </span><span class="si">$modified_string</span><span class="s2">;</span>
<span class="s2"> }</span>
<span class="s2"> </span>
<span class="s2"> </span>
<span class="s2">//CODEBLOCK</span>

<span class="s2"> private static function render_view_response_filter(</span><span class="si">$buffer_string</span><span class="s2">, </span><span class="si">$template</span><span class="s2"> = false){  </span>
<span class="s2">  return </span><span class="si">$buffer_string</span><span class="s2">;</span>
<span class="s2"> }</span>
<span class="s2"> </span>
<span class="s2">//CODEBLOCK</span>

<span class="s2"> private static function render_layout_response_filter(</span><span class="si">$buffer_string</span><span class="s2">, </span><span class="si">$template</span><span class="s2"> = false){</span>
<span class="s2">   if(</span><span class="si">$randomise</span><span class="s2"> = Config::get(&#39;randomise_domains&#39;)) return self::randomise_source_domains(</span><span class="si">$buffer_string</span><span class="s2">, </span><span class="si">$randomise</span><span class="s2">);</span>
<span class="s2">   else return </span><span class="si">$buffer_string</span><span class="s2">;</span>
<span class="s2"> }</span>
<span class="s2"> </span>
<span class="s2">//CODEBLOCK</span>

<span class="s2"> private static function render_partial_response_filter(</span><span class="si">$buffer_string</span><span class="s2">, </span><span class="si">$template</span><span class="s2"> = false){</span>
<span class="s2">  return </span><span class="si">$buffer_string</span><span class="s2">;</span>
<span class="s2"> }</span>
<span class="s2"> </span>
<span class="s2">//CODEBLOCK</span>

<span class="s2"> private function response_filter(</span><span class="si">$type</span><span class="s2">){</span>
<span class="s2">  </span><span class="si">$return</span><span class="s2"> = ob_get_contents();</span>
<span class="s2">  ob_end_clean();</span>
<span class="s2">  foreach(self::</span><span class="si">$response_filters[$type]</span><span class="s2"> as </span><span class="si">$filter</span><span class="s2">){</span>
<span class="s2">   </span><span class="si">$return</span><span class="s2"> = call_user_func(array(</span><span class="si">$filter[&#39;model&#39;]</span><span class="s2">, </span><span class="si">$filter[&#39;method&#39;]</span><span class="s2">), </span><span class="si">$return</span><span class="s2">, </span><span class="si">$this</span><span class="s2">);</span>
<span class="s2">  }</span>
<span class="s2">  return </span><span class="si">$return</span><span class="s2">;</span>
<span class="s2"> }</span>
<span class="s2"> </span>
<span class="s2"> public static function add_response_filter(</span><span class="si">$filter_type</span><span class="s2">, </span><span class="si">$filter_name</span><span class="s2">, </span><span class="si">$filter</span><span class="s2">){</span>
<span class="s2">  self::</span><span class="si">$response_filters[$filter_type][$filter_name]</span><span class="s2"> = </span><span class="si">$filter</span><span class="s2">;</span>
<span class="s2"> }</span>
<span class="s2"> public static function remove_response_filter(</span><span class="si">$filter_type</span><span class="s2">, </span><span class="si">$filter_name</span><span class="s2">){</span>
<span class="s2">  unset(self::</span><span class="si">$response_filters[$filter_type][$filter_name]</span><span class="s2">);</span>
<span class="s2"> }</span>
<span class="s2"> </span>
<span class="s2"> public function parse(</span><span class="si">$suffix</span><span class="s2">=&quot;</span><span class="nx">html</span><span class="s2">&quot;, </span><span class="si">$parse_as</span><span class="s2">=&quot;</span><span class="nx">layout</span><span class="s2">&quot;) {</span>
<span class="s2">   ob_start();</span>
<span class="s2">   if(!</span><span class="si">$suffix</span><span class="s2">) </span><span class="si">$suffix</span><span class="s2"> = &quot;</span><span class="nx">html</span><span class="s2">&quot;;</span>
<span class="s2">    if(in_array(</span><span class="si">$suffix</span><span class="s2">, array_keys(self::</span><span class="si">$mime_types</span><span class="s2">))) </span><span class="si">$type</span><span class="s2"> = self::</span><span class="si">$mime_types[$suffix]</span><span class="s2">;</span>
<span class="s2">    else </span><span class="si">$type</span><span class="s2"> = &quot;</span><span class="nx">text</span><span class="o">/</span><span class="s2">&quot;.</span><span class="si">$suffix</span><span class="s2">;</span>
<span class="s2">   </span>
<span class="s2">   </span>
<span class="s2">//CODEBLOCK</span>

<span class="s2">   if(</span><span class="si">$cache_object</span><span class="s2"> = </span><span class="si">$this-&gt;cache_enabled</span><span class="s2">(</span><span class="si">$parse_as</span><span class="s2">)){</span>
<span class="s2">     </span>
<span class="s2">//CODEBLOCK</span>

<span class="s2">     if(</span><span class="si">$suffix</span><span class="s2"> != &quot;</span><span class="nx">html</span><span class="s2">&quot;) </span><span class="si">$cache_object-&gt;suffix</span><span class="s2"> = </span><span class="si">$suffix</span><span class="s2">.&#39;.cache&#39;;</span>
<span class="s2">     if(</span><span class="si">$this-&gt;cached</span><span class="s2">(</span><span class="si">$cache_object</span><span class="s2">, </span><span class="si">$parse_as</span><span class="s2">) ) return </span><span class="si">$this-&gt;cached</span><span class="s2">(</span><span class="si">$cache_object</span><span class="s2">, </span><span class="si">$parse_as</span><span class="s2">);     </span>
<span class="s2">    }</span>
<span class="s2">    </span>
<span class="s2">   foreach(</span><span class="si">$this-&gt;template_paths</span><span class="s2"> as </span><span class="si">$path</span><span class="s2">) {</span>
<span class="s2">     if(is_readable(</span><span class="si">$path</span><span class="s2">.&quot;</span><span class="o">.</span><span class="s2">&quot;.</span><span class="si">$suffix</span><span class="s2">)) {</span>
<span class="s2">    </span><span class="si">$view_file</span><span class="s2"> = </span><span class="si">$path</span><span class="s2">.&quot;</span><span class="o">.</span><span class="s2">&quot;.</span><span class="si">$suffix</span><span class="s2">;</span>
<span class="s2">    break;</span>
<span class="s2">   }</span>
<span class="s2">   }</span>
<span class="s2">  extract((array)</span><span class="si">$this</span><span class="s2">);</span>

<span class="s2">  if(!is_readable(</span><span class="si">$view_file</span><span class="s2">)) throw new WaxException(&quot;</span><span class="nx">Unable</span> <span class="nx">to</span> <span class="nx">find</span> <span class="s2">&quot;.</span><span class="si">$this-&gt;template_paths</span><span class="s2">[0].&quot;</span><span class="o">.</span><span class="s2">&quot;.</span><span class="si">$suffix</span><span class="s2">, &quot;</span><span class="nx">Missing</span> <span class="nx">Template</span> <span class="nx">File</span><span class="s2">&quot;, print_r(</span><span class="si">$this-&gt;template_paths</span><span class="s2">, 1));</span>
<span class="s2">  </span>
<span class="s2">  if(!include(</span><span class="si">$view_file</span><span class="s2">)) throw new WaxUserException(&quot;</span><span class="nx">PHP</span> <span class="nx">parse</span> <span class="nx">error</span> <span class="nx">in</span> <span class="nv">$view_file</span><span class="s2">&quot;);</span>
<span class="s2">  </span><span class="si">$content</span><span class="s2"> = </span><span class="si">$this-&gt;response_filter</span><span class="s2">(</span><span class="si">$parse_as</span><span class="s2">);</span>
<span class="s2">  </span>
<span class="s2">  if(</span><span class="si">$cache_object</span><span class="s2"> &amp;&amp; </span><span class="si">$this-&gt;cacheable</span><span class="s2">(</span><span class="si">$cache_object</span><span class="s2">, </span><span class="si">$type</span><span class="s2">)) </span><span class="si">$this-&gt;cache_set</span><span class="s2">(</span><span class="si">$cache_object</span><span class="s2">, </span><span class="si">$content</span><span class="s2">);</span>
<span class="s2">  return </span><span class="si">$content</span><span class="s2">;</span>
<span class="s2"> }</span>
<span class="s2"> </span>
<span class="s2"> public function add_values(</span><span class="si">$vals_array</span><span class="s2">=array()) {</span>
<span class="s2">   foreach(</span><span class="si">$vals_array</span><span class="s2"> as </span><span class="si">$var</span><span class="s2">=&gt;</span><span class="si">$val</span><span class="s2">) </span><span class="si">$this</span><span class="s2">-&gt;</span><span class="si">{</span><span class="nv">$var</span><span class="si">}</span><span class="s2">=</span><span class="si">$val</span><span class="s2">;</span>
<span class="s2"> }</span>



<span class="s2">  </span>
<span class="s2">//CODEBLOCK</span>

<span class="s2">  public function cache_identifier(</span><span class="si">$model</span><span class="s2">){    </span>
<span class="s2">    return </span><span class="si">$model-&gt;identifier</span><span class="s2">();</span>
<span class="s2">  }</span>
<span class="s2">  </span>
<span class="s2">  public function cacheable(</span><span class="si">$model</span><span class="s2">, </span><span class="si">$type</span><span class="s2">){    </span>
<span class="s2">    if(!</span><span class="si">$model-&gt;excluded</span><span class="s2">(</span><span class="si">$model-&gt;config</span><span class="s2">) &amp;&amp; </span><span class="si">$model-&gt;included</span><span class="s2">(</span><span class="si">$model-&gt;config</span><span class="s2">)) return true;</span>
<span class="s2">    else return false;</span>
<span class="s2">  }</span>
<span class="s2"> public function cached(</span><span class="si">$model</span><span class="s2">, </span><span class="si">$type</span><span class="s2">){</span>
<span class="s2">   if(!</span><span class="si">$this-&gt;cacheable</span><span class="s2">(</span><span class="si">$model</span><span class="s2">, </span><span class="si">$type</span><span class="s2">)) return false;</span>
<span class="s2">   else return </span><span class="si">$model-&gt;get</span><span class="s2">();</span>
<span class="s2"> }</span>
<span class="s2">  public function cache_set(</span><span class="si">$model</span><span class="s2">, </span><span class="si">$value</span><span class="s2">){</span>

<span class="s2">    </span><span class="si">$model-&gt;set</span><span class="s2">(</span><span class="si">$value</span><span class="s2">);</span>
<span class="s2">  }</span>
<span class="s2">  public function cache_enabled(</span><span class="si">$type</span><span class="s2">){</span>
<span class="s2">    </span><span class="si">$check</span><span class="s2"> = </span><span class="si">$type</span><span class="s2">.&quot;</span><span class="nx">_cache</span><span class="s2">&quot;;</span>
<span class="s2">    if(</span><span class="si">$this-&gt;use_cache</span><span class="s2"> &amp;&amp; is_array(Config::get(</span><span class="si">$check</span><span class="s2">)) &amp;&amp; count(Config::get(</span><span class="si">$check</span><span class="s2">))){      </span>
<span class="s2">      </span><span class="si">$cache_config</span><span class="s2"> = Config::get(</span><span class="si">$check</span><span class="s2">);</span>
<span class="s2">      </span><span class="si">$cache_engine</span><span class="s2"> = </span><span class="si">$cache_config[&#39;engine&#39;]</span><span class="s2">;</span>
<span class="s2">      if(isset(</span><span class="si">$cache_config[&#39;lifetime&#39;]</span><span class="s2">)) </span><span class="si">$cache_lifetime</span><span class="s2"> = </span><span class="si">$this-&gt;cache_config</span><span class="s2">[&#39;lifetime&#39;];</span>
<span class="s2">      </span><span class="si">$cache_object</span><span class="s2"> = new WaxCacheLoader(</span><span class="si">$cache_config</span><span class="s2">, CACHE_DIR.</span><span class="si">$type</span><span class="s2">.&quot;</span><span class="o">/</span><span class="s2">&quot;, </span><span class="si">$cache_lifetime</span><span class="s2">);</span>
<span class="s2">      </span><span class="si">$cache_object-&gt;identifier</span><span class="s2"> = </span><span class="si">$cache_object-&gt;identifier</span><span class="s2">();      </span>
<span class="s2">      return </span><span class="si">$cache_object</span><span class="s2">;</span>
<span class="s2">    }else return false;</span>
<span class="s2">  }</span>

<span class="s2">}</span>
</pre></div></pre></div>            </td>
          </tr>
                  <tr id="section-5">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>" : "http://";</p>
            </td>
            <td class="code">
                          </td>
          </tr>
                  <tr id="section-6">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>default static function to provide a before hook to rendering views 
 lets you do things like replacing markdown style code with proper html etc
 As these defaults simply return whats passed in then we need to discard the 
 current buffer so no duplication of content
<em class='docparam'>@param</em> string $buffer_string 
<em class='docparam'>@return</em> string
<em class='docparam'>@author</em> charles marshall</p>
            </td>
            <td class="code">
                          </td>
          </tr>
                  <tr id="section-7">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>default static function to give a before hook on rendering a layout
 again design so you can manipulate the content of the buffer to allow transformations of content etc
<em class='docparam'>@param</em> string $buffer_string 
<em class='docparam'>@return</em> string
<em class='docparam'>@author</em> charles marshall</p>
            </td>
            <td class="code">
                          </td>
          </tr>
                  <tr id="section-8">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>default static function to give a before hook on rendering a partial
 again design so you can manipulate the content of the buffer to allow transformations of content etc
<em class='docparam'>@param</em> string $buffer_string 
<em class='docparam'>@return</em> string
<em class='docparam'>@author</em> charles marshall</p>
            </td>
            <td class="code">
                          </td>
          </tr>
                  <tr id="section-9">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>loop over the registered response filters and pass off function calls to the model and method specified
 gives you ability to manipulate buffer content, send to cache etc
<em class='docparam'>@param</em> string $type 
<em class='docparam'>@return</em> void
<em class='docparam'>@author</em> charles marshall</p>
            </td>
            <td class="code">
                          </td>
          </tr>
                  <tr id="section-10">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>CACHE </p>
            </td>
            <td class="code">
                          </td>
          </tr>
                  <tr id="section-11">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p>change the suffix if not html - so .xml files etc cache seperately</p>
            </td>
            <td class="code">
                          </td>
          </tr>
                  <tr id="section-12">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p>INTERFACE METHODS </p>
            </td>
            <td class="code">
                          </td>
          </tr>
              </tbody>
    </table>
  </div>
</body>
</html>